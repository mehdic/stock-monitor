[INFO] Scanning for projects...
[INFO] 
[INFO] ---------------< com.stockmonitor:stockmonitor-backend >----------------
[INFO] Building StockMonitor Backend 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[WARNING] The POM for org.slf4j:slf4j-api:jar:1.7.35 is missing, no dependency information available
[WARNING] The POM for org.yaml:snakeyaml:jar:2.0 is missing, no dependency information available
[WARNING] The POM for jakarta.xml.bind:jakarta.xml.bind-api:jar:3.0.0 is missing, no dependency information available
[WARNING] The POM for org.yaml:snakeyaml:jar:2.1 is missing, no dependency information available
[WARNING] The POM for io.micrometer:micrometer-observation:jar:1.10.9 is missing, no dependency information available
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ stockmonitor-backend ---
[INFO] Copying 13 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ stockmonitor-backend ---
[INFO] Changes detected - recompiling the module! :source
[INFO] Compiling 138 source files with javac [debug target 17] to target/classes
[WARNING] system modules path not set in conjunction with -source 17
[INFO] Annotation processing is enabled because one or more processors were found
  on the class path. A future release of javac may disable annotation processing
  unless at least one processor is specified by name (-processor), or a search
  path is specified (--processor-path, --processor-module-path), or annotation
  processing is enabled explicitly (-proc:only, -proc:full).
  Use -Xlint:-options to suppress this message.
  Use -proc:none to disable annotation processing.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Report.java:[42,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Report.java:[64,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Report.java:[83,25] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Report.java:[89,19] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/FactorScore.java:[64,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/FactorScore.java:[67,19] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/DataSource.java:[64,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/DataSource.java:[70,19] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/DataSource.java:[76,19] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/DataSource.java:[79,19] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/dto/RegisterRequest.java:[37,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/dto/RegisterRequest.java:[39,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/FactorModelVersion.java:[39,19] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/FactorModelVersion.java:[43,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/FactorModelVersion.java:[47,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/FactorModelVersion.java:[51,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/FactorModelVersion.java:[55,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/FactorModelVersion.java:[62,22] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/FactorModelVersion.java:[66,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/User.java:[87,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/UniverseConstituent.java:[65,19] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Notification.java:[45,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Notification.java:[48,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Notification.java:[71,19] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Notification.java:[77,25] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Notification.java:[80,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/AuditLog.java:[48,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/AuditLog.java:[52,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/AuditLog.java:[70,19] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Backtest.java:[56,22] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Backtest.java:[99,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Backtest.java:[103,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Backtest.java:[107,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/model/Backtest.java:[110,18] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[INFO] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/security/JwtService.java: /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/security/JwtService.java uses or overrides a deprecated API.
[INFO] /home/user/stock-monitor/backend/src/main/java/com/stockmonitor/security/JwtService.java: Recompile with -Xlint:deprecation for details.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ stockmonitor-backend ---
[INFO] Copying 2 resources from src/test/resources to target/test-classes
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ stockmonitor-backend ---
[INFO] Changes detected - recompiling the module! :dependency
[INFO] Compiling 35 source files with javac [debug target 17] to target/test-classes
[WARNING] system modules path not set in conjunction with -source 17
[INFO] Annotation processing is enabled because one or more processors were found
  on the class path. A future release of javac may disable annotation processing
  unless at least one processor is specified by name (-processor), or a search
  path is specified (--processor-path, --processor-module-path), or annotation
  processing is enabled explicitly (-proc:only, -proc:full).
  Use -Xlint:-options to suppress this message.
  Use -proc:none to disable annotation processing.
[INFO] /home/user/stock-monitor/backend/src/test/java/com/stockmonitor/service/NotificationServiceTest.java: Some input files use unchecked or unsafe operations.
[INFO] /home/user/stock-monitor/backend/src/test/java/com/stockmonitor/service/NotificationServiceTest.java: Recompile with -Xlint:unchecked for details.
[INFO] 
[INFO] --- surefire:3.2.5:test (default-test) @ stockmonitor-backend ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.stockmonitor.contract.ConstraintContractTest
13:52:02.374 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.stockmonitor.contract.ConstraintContractTest]: ConstraintContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
13:52:02.643 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.stockmonitor.StockMonitorApplication for test class com.stockmonitor.contract.ConstraintContractTest

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.0)

2025-11-06 13:52:05.116 [main] INFO  c.s.contract.ConstraintContractTest - Starting ConstraintContractTest using Java 21.0.8 with PID 2793 (started by root in /home/user/stock-monitor/backend)
2025-11-06 13:52:05.119 [main] INFO  c.s.contract.ConstraintContractTest - The following 1 profile is active: "test"
2025-11-06 13:52:11.889 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-06 13:52:14.220 [main] DEBUG org.hibernate.SQL - drop table if exists app_user cascade 
2025-11-06 13:52:14.226 [main] DEBUG org.hibernate.SQL - drop table if exists audit_log cascade 
2025-11-06 13:52:14.227 [main] DEBUG org.hibernate.SQL - drop table if exists backtest cascade 
2025-11-06 13:52:14.227 [main] DEBUG org.hibernate.SQL - drop table if exists constraint_set cascade 
2025-11-06 13:52:14.227 [main] DEBUG org.hibernate.SQL - drop table if exists data_source cascade 
2025-11-06 13:52:14.227 [main] DEBUG org.hibernate.SQL - drop table if exists exclusion cascade 
2025-11-06 13:52:14.228 [main] DEBUG org.hibernate.SQL - drop table if exists factor_model_version cascade 
2025-11-06 13:52:14.228 [main] DEBUG org.hibernate.SQL - drop table if exists factor_score cascade 
2025-11-06 13:52:14.229 [main] DEBUG org.hibernate.SQL - drop table if exists holding cascade 
2025-11-06 13:52:14.229 [main] DEBUG org.hibernate.SQL - drop table if exists notification cascade 
2025-11-06 13:52:14.229 [main] DEBUG org.hibernate.SQL - drop table if exists portfolio cascade 
2025-11-06 13:52:14.230 [main] DEBUG org.hibernate.SQL - drop table if exists recommendation cascade 
2025-11-06 13:52:14.230 [main] DEBUG org.hibernate.SQL - drop table if exists recommendation_run cascade 
2025-11-06 13:52:14.230 [main] DEBUG org.hibernate.SQL - drop table if exists report cascade 
2025-11-06 13:52:14.231 [main] DEBUG org.hibernate.SQL - drop table if exists service_api_keys cascade 
2025-11-06 13:52:14.231 [main] DEBUG org.hibernate.SQL - drop table if exists universe cascade 
2025-11-06 13:52:14.231 [main] DEBUG org.hibernate.SQL - drop table if exists universe_constituent cascade 
2025-11-06 13:52:14.242 [main] DEBUG org.hibernate.SQL - create table app_user (base_currency varchar(3) not null, email_verified boolean not null, enabled boolean not null, created_at timestamp(6) not null, disclaimer_accepted_at timestamp(6), last_login_at timestamp(6), updated_at timestamp(6) not null, id uuid not null, selected_universe_id uuid, email varchar(255) not null unique, first_name varchar(255), last_name varchar(255), password_hash varchar(255) not null, role varchar(255) not null check (role in ('OWNER','VIEWER','SERVICE')), timezone varchar(255) not null, notification_preferences TEXT, primary key (id))
2025-11-06 13:52:14.259 [main] DEBUG org.hibernate.SQL - create table audit_log (success boolean not null, created_at timestamp(6) not null, execution_duration_ms bigint, entity_id uuid not null, id uuid not null, user_id uuid, action varchar(20) not null, ip_address varchar(45), entity_type varchar(50) not null, request_id varchar(100), session_id varchar(100), action_detail varchar(200), user_agent varchar(500), error_message varchar(1000), after_state TEXT, before_state TEXT, changed_fields varchar(255) array, primary key (id))
2025-11-06 13:52:14.262 [main] DEBUG org.hibernate.SQL - create table backtest (alpha_pct numeric(10,6), avg_turnover_pct numeric(5,2), beat_equal_weight boolean, benchmark_return_pct numeric(10,6), cagr_pct numeric(10,6), end_date date not null, final_value numeric(19,4), hit_rate_pct numeric(5,2), initial_capital numeric(19,4) not null, max_drawdown_pct numeric(10,6), sharpe_ratio numeric(7,4), start_date date not null, total_cost_bps numeric(10,2), total_return_pct numeric(10,6), volatility_pct numeric(10,6), completed_at timestamp(6), created_at timestamp(6) not null, execution_duration_ms bigint, started_at timestamp(6), updated_at timestamp(6) not null, constraint_set_id uuid not null, id uuid not null, universe_id uuid not null, user_id uuid not null, status varchar(20) not null, name varchar(100) not null, verdict_text varchar(500), error_message varchar(1000), cost_assumptions TEXT not null, equity_curve_data TEXT not null, turnover_history TEXT not null, primary key (id))
2025-11-06 13:52:14.264 [main] DEBUG org.hibernate.SQL - create table constraint_set (cost_margin_required_bps integer not null, earnings_blackout_hours integer not null, is_active boolean not null, liquidity_floor_adv_usd numeric(19,4) not null, max_name_weight_large_cap_pct numeric(5,2) not null, max_name_weight_mid_cap_pct numeric(5,2) not null, max_name_weight_small_cap_pct numeric(5,2) not null, max_sector_exposure_pct numeric(5,2) not null, participation_cap_tier1_pct numeric(5,2) not null, participation_cap_tier2_pct numeric(5,2) not null, participation_cap_tier3_pct numeric(5,2) not null, participation_cap_tier4_pct numeric(5,2) not null, participation_cap_tier5_pct numeric(5,2) not null, spread_threshold_bps integer not null, turnover_cap_pct numeric(5,2) not null, version integer not null, weight_deadband_bps integer not null, created_at timestamp(6) not null, updated_at timestamp(6) not null, id uuid not null, user_id uuid not null, name varchar(100) not null, primary key (id))
2025-11-06 13:52:14.266 [main] DEBUG org.hibernate.SQL - create table data_source (consecutive_failures integer not null, is_active boolean not null, is_critical boolean not null, refresh_frequency_hours integer not null, staleness_threshold_hours integer not null, uptime_pct_30d numeric(5,2), created_at timestamp(6) not null, last_attempted_update timestamp(6), last_successful_update timestamp(6), last_update_duration_ms bigint, record_count bigint, updated_at timestamp(6) not null, id uuid not null, health_status varchar(20) not null, source_type varchar(20) not null, name varchar(100) not null unique, provider varchar(100) not null, description varchar(500), error_message varchar(1000), primary key (id))
2025-11-06 13:52:14.268 [main] DEBUG org.hibernate.SQL - create table exclusion (current_price numeric(19,4) not null, failed_constraint_threshold numeric(19,4), failed_constraint_value numeric(19,4), liquidity_tier integer not null, created_at timestamp(6) not null, id uuid not null, run_id uuid not null, market_cap_tier varchar(20) not null, symbol varchar(20) not null, exclusion_reason_code varchar(50) not null, sector varchar(50) not null, failed_constraint_name varchar(100), exclusion_reason_text varchar(500) not null, primary key (id))
2025-11-06 13:52:14.271 [main] DEBUG org.hibernate.SQL - create table factor_model_version (effective_date date not null, is_active boolean not null, winsorization_percentile numeric(5,2) not null, created_at timestamp(6) not null, id uuid not null, version_number varchar(20) not null unique, approved_by varchar(100), created_by varchar(100) not null, sector_neutralization_method varchar(100) not null, description varchar(1000), composite_weighting TEXT not null, momentum_definition TEXT not null, quality_definition TEXT not null, revisions_definition TEXT not null, value_definition TEXT not null, primary key (id))
2025-11-06 13:52:14.275 [main] DEBUG org.hibernate.SQL - create table factor_score (calculation_date date not null, data_quality_score integer not null, percentile_rank_sector numeric(5,2) not null, percentile_rank_universe numeric(5,2) not null, raw_score numeric(10,6) not null, sector_normalized_score numeric(10,6) not null, created_at timestamp(6) not null, id uuid not null, factor_type varchar(20) not null, symbol varchar(20) not null, sector varchar(50) not null, component_breakdown TEXT not null, primary key (id))
2025-11-06 13:52:14.277 [main] DEBUG org.hibernate.SQL - create table holding (acquisition_date date not null, cost_basis numeric(19,4) not null, cost_basis_per_share numeric(19,4) not null, currency varchar(3) not null, current_market_value numeric(19,4) not null, current_price numeric(19,4) not null, fx_rate_to_base numeric(19,8) not null, in_universe boolean not null, quantity numeric(19,6) not null, unrealized_pnl numeric(19,4) not null, unrealized_pnl_pct numeric(10,6) not null, weight_pct numeric(5,2) not null, created_at timestamp(6) not null, price_updated_at timestamp(6), updated_at timestamp(6) not null, id uuid not null, portfolio_id uuid not null, market_cap_tier varchar(20), symbol varchar(20) not null, sector varchar(50), primary key (id))
2025-11-06 13:52:14.279 [main] DEBUG org.hibernate.SQL - create table notification (is_read boolean not null, created_at timestamp(6) not null, read_at timestamp(6), sent_at timestamp(6) not null, id uuid not null, run_id uuid, user_id uuid not null, channel varchar(20) not null, delivery_status varchar(20) not null, priority varchar(20) not null, notification_type varchar(30) not null, action_label varchar(50), category varchar(50), subject varchar(200) not null, action_url varchar(500), delivery_error varchar(500), message varchar(2000) not null, title varchar(255), primary key (id))
2025-11-06 13:52:14.281 [main] DEBUG org.hibernate.SQL - create table portfolio (benchmark_return_pct numeric(10,6) not null, cash_balance numeric(19,4) not null, relative_return_pct numeric(10,6) not null, total_cost_basis numeric(19,4) not null, total_market_value numeric(19,4) not null, universe_coverage_pct numeric(5,2) not null, unrealized_pnl numeric(19,4) not null, unrealized_pnl_pct numeric(10,6) not null, created_at timestamp(6) not null, last_calculated_at timestamp(6) not null, updated_at timestamp(6) not null, active_constraint_set_id uuid, active_universe_id uuid, id uuid not null, user_id uuid not null unique, primary key (id))
2025-11-06 13:52:14.283 [main] DEBUG org.hibernate.SQL - create table recommendation (confidence_score integer not null, current_price numeric(19,4) not null, current_weight_pct numeric(5,2) not null, driver1_score numeric(7,4) not null, driver2_score numeric(7,4) not null, driver3_score numeric(7,4) not null, edge_over_cost_bps numeric(7,2) not null, expected_alpha_bps numeric(7,2) not null, expected_cost_bps numeric(7,2) not null, liquidity_tier integer not null, rank integer not null, risk_contribution_pct numeric(5,2), target_weight_pct numeric(5,2) not null, weight_change_pct numeric(5,2) not null, created_at timestamp(6) not null, id uuid not null, run_id uuid not null, change_indicator varchar(20) not null, market_cap_tier varchar(20) not null, symbol varchar(20) not null, driver1_name varchar(50) not null, driver2_name varchar(50) not null, driver3_name varchar(50) not null, sector varchar(50) not null, constraint_notes varchar(500), explanation varchar(1000) not null, primary key (id))
2025-11-06 13:52:14.286 [main] DEBUG org.hibernate.SQL - create table recommendation_run (constraint_feasibility_check_passed boolean not null, data_freshness_check_passed boolean not null, estimated_cost_bps numeric(7,2), exclusion_count integer not null, expected_alpha_bps numeric(7,2), expected_turnover_pct numeric(5,2), recommendation_count integer not null, scheduled_date date, completed_at timestamp(6), created_at timestamp(6) not null, execution_duration_ms bigint, started_at timestamp(6), updated_at timestamp(6) not null, constraint_set_id uuid not null, id uuid not null, portfolio_id uuid not null, previous_run_id uuid, universe_id uuid not null, user_id uuid not null, decision varchar(20) not null, run_type varchar(20) not null, status varchar(20) not null, decision_reason varchar(500), error_message varchar(1000), primary key (id))
2025-11-06 13:52:14.288 [main] DEBUG org.hibernate.SQL - create table report (download_count integer not null, exclusion_count integer not null, recommendation_count integer not null, created_at timestamp(6) not null, downloaded_at timestamp(6), file_size_bytes bigint, generation_timestamp timestamp(6) not null, updated_at timestamp(6) not null, format varchar(10) not null, id uuid not null, run_id uuid not null unique, user_id uuid not null, disclaimer_version varchar(20) not null, report_type varchar(20) not null, file_path varchar(500), summary_text varchar(2000) not null, disclaimer_text varchar(5000) not null, constraint_snapshot TEXT not null, cost_analysis TEXT, performance_metrics TEXT, primary key (id))
2025-11-06 13:52:14.291 [main] DEBUG org.hibernate.SQL - create table service_api_keys (is_active boolean not null, created_at timestamp(6) not null, expires_at timestamp(6), last_used_at timestamp(6), updated_at timestamp(6) not null, id uuid not null, key_hash varchar(512) not null unique, created_by varchar(255), description varchar(255), name varchar(255) not null, primary key (id))
2025-11-06 13:52:14.293 [main] DEBUG org.hibernate.SQL - create table universe (constituent_count integer not null, effective_date date not null, is_active boolean not null, max_market_cap numeric(19,4), min_market_cap numeric(19,4), version integer not null, created_at timestamp(6) not null, updated_at timestamp(6) not null, id uuid not null, benchmark_symbol varchar(20) not null, type varchar(20) not null, name varchar(100) not null unique, description varchar(500), liquidity_tier_threshold TEXT not null, primary key (id))
2025-11-06 13:52:14.296 [main] DEBUG org.hibernate.SQL - create table universe_constituent (added_date date not null, avg_daily_value numeric(19,4) not null, avg_daily_volume numeric(19,2) not null, is_active boolean not null, liquidity_tier integer not null, removed_date date, created_at timestamp(6) not null, updated_at timestamp(6) not null, id uuid not null, universe_id uuid not null, market_cap_tier varchar(20) not null, symbol varchar(20) not null, sector varchar(50) not null, industry varchar(100), company_name varchar(255) not null, primary key (id))
2025-11-06 13:52:14.298 [main] DEBUG org.hibernate.SQL - create index idx_service_api_keys_key_hash on service_api_keys (key_hash)
2025-11-06 13:52:14.299 [main] DEBUG org.hibernate.SQL - create index idx_service_api_keys_is_active on service_api_keys (is_active)
2025-11-06 13:52:17.235 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-06 13:52:18.248 [main] WARN  i.n.r.d.DefaultDnsServerAddressStreamProvider - Default DNS servers: [/[2001:4860:4860:0:0:0:0:8888]:53, /[2001:4860:4860:0:0:0:0:8844]:53] (Google Public DNS as a fallback)
2025-11-06 13:52:18.886 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@39c01d57, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7a0d71d4, org.springframework.security.web.context.SecurityContextHolderFilter@1e2b7fa5, org.springframework.security.web.header.HeaderWriterFilter@475ecd46, org.springframework.security.web.authentication.logout.LogoutFilter@1a0a6d71, com.stockmonitor.security.JwtAuthenticationFilter@1331742, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1bdbf918, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@28e826c3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6dd5923a, org.springframework.security.web.session.SessionManagementFilter@56f8032, org.springframework.security.web.access.ExceptionTranslationFilter@5ea46e79, org.springframework.security.web.access.intercept.AuthorizationFilter@79c26be5]
2025-11-06 13:52:18.898 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5fde6b8c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1939ecca, org.springframework.security.web.context.SecurityContextHolderFilter@6a474e00, org.springframework.security.web.header.HeaderWriterFilter@12d0699d, org.springframework.security.web.authentication.logout.LogoutFilter@bc9bd00, com.stockmonitor.security.ServiceApiKeyAuthFilter@225fb905, com.stockmonitor.security.JwtAuthenticationFilter@1331742, com.stockmonitor.security.ServiceRoleAccessFilter@21471ca8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@71f164d6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@607c77f4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@36840e6c, org.springframework.security.web.session.SessionManagementFilter@36c1b50d, org.springframework.security.web.access.ExceptionTranslationFilter@52f93a84, org.springframework.security.web.access.intercept.AuthorizationFilter@72a4b564]
2025-11-06 13:52:19.484 [main] WARN  com.stockmonitor.config.CacheConfig - Redis unavailable - falling back to Caffeine local cache only: Unable to connect to Redis
2025-11-06 13:52:20.984 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-11-06 13:52:20.987 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-11-06 13:52:21.195 [main] INFO  org.springframework.web.SimpLogging - Starting...
2025-11-06 13:52:21.196 [main] INFO  org.springframework.web.SimpLogging - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5c7744f0]]
2025-11-06 13:52:21.197 [main] INFO  org.springframework.web.SimpLogging - Started.
2025-11-06 13:52:21.219 [main] INFO  c.s.contract.ConstraintContractTest - Started ConstraintContractTest in 18.167 seconds (process running for 20.87)
2025-11-06 13:52:21.393 [main] INFO  c.s.config.TestDataInitializer - Initializing global test data...
2025-11-06 13:52:21.539 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:21.811 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:21.862 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:21.866 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:21.871 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:21.873 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:21.878 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select fmv1_0.id,fmv1_0.approved_by,fmv1_0.composite_weighting,fmv1_0.created_at,fmv1_0.created_by,fmv1_0.description,fmv1_0.effective_date,fmv1_0.is_active,fmv1_0.momentum_definition,fmv1_0.quality_definition,fmv1_0.revisions_definition,fmv1_0.sector_neutralization_method,fmv1_0.value_definition,fmv1_0.version_number,fmv1_0.winsorization_percentile from factor_model_version fmv1_0 where fmv1_0.version_number=?
2025-11-06 13:52:21.916 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.FactorModelVersion */insert into factor_model_version (approved_by,composite_weighting,created_at,created_by,description,effective_date,is_active,momentum_definition,quality_definition,revisions_definition,sector_neutralization_method,value_definition,version_number,winsorization_percentile,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:21.920 [main] INFO  c.s.config.TestDataInitializer - Global test data initialized successfully
OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
WARNING: A Java agent has been loaded dynamically (/home/user/stock-monitor/backend/.mvn/repository/net/bytebuddy/byte-buddy-agent/1.14.9/byte-buddy-agent-1.14.9.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
2025-11-06 13:52:22.980 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:22.992 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:22.997 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:23.000 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:23.094 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.101 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:23.114 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:23.118 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:23.152 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.161 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:23.163 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:23.166 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:23.243 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.250 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:23.260 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.264 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:23.267 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.271 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.user_id=? and rr1_0.portfolio_id=? and rr1_0.scheduled_date=?
2025-11-06 13:52:23.278 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.user_id=? and cs1_0.is_active
2025-11-06 13:52:23.288 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.293 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:23.307 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.310 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:23.313 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.316 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:23.318 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.321 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:23.323 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.326 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:23.329 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.334 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:23.653 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:23.664 [main] WARN  o.s.w.s.h.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/api/portfolios/ad669d81-980f-47f9-aa2c-c966cf245e7b/constraints/reset' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-11-06 13:52:23.733 [main] INFO  c.s.controller.ConstraintController - Reset constraints to defaults for portfolio: ad669d81-980f-47f9-aa2c-c966cf245e7b
2025-11-06 13:52:23.734 [main] INFO  c.s.service.ConstraintService - Resetting constraints to defaults for portfolio: ad669d81-980f-47f9-aa2c-c966cf245e7b
2025-11-06 13:52:23.735 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:23.739 [main] DEBUG org.hibernate.SQL - select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.id=?
2025-11-06 13:52:23.750 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:23.761 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.ConstraintSet */update constraint_set set cost_margin_required_bps=?,earnings_blackout_hours=?,is_active=?,liquidity_floor_adv_usd=?,max_name_weight_large_cap_pct=?,max_name_weight_mid_cap_pct=?,max_name_weight_small_cap_pct=?,max_sector_exposure_pct=?,name=?,participation_cap_tier1_pct=?,participation_cap_tier2_pct=?,participation_cap_tier3_pct=?,participation_cap_tier4_pct=?,participation_cap_tier5_pct=?,spread_threshold_bps=?,turnover_cap_pct=?,updated_at=?,user_id=?,version=?,weight_deadband_bps=? where id=?
2025-11-06 13:52:23.767 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.Portfolio */update portfolio set active_constraint_set_id=?,active_universe_id=?,benchmark_return_pct=?,cash_balance=?,last_calculated_at=?,relative_return_pct=?,total_cost_basis=?,total_market_value=?,universe_coverage_pct=?,unrealized_pnl=?,unrealized_pnl_pct=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:23.930 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:23.948 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:23.950 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:23.950 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:23.951 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:23.951 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:23.955 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:23.957 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:23.960 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:23.963 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:23.963 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:23.967 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0
2025-11-06 13:52:23.968 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.ConstraintSet */delete from constraint_set where id=?
2025-11-06 13:52:23.969 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.ConstraintSet */delete from constraint_set where id=?
2025-11-06 13:52:23.971 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:23.972 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:23.974 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:23.977 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:23.977 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/portfolios/ad669d81-980f-47f9-aa2c-c966cf245e7b/constraints/reset
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0MywiZXhwIjoxNzYyNDQwNzQzfQ.hYTzZtz6g8JpEdq7Iu-Wmn-90ctWoonCXU0pb-bzSbE"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.ConstraintController
           Method = com.stockmonitor.controller.ConstraintController#resetToDefaults(UUID)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":"baf8174e-b4b1-4e44-b2ae-51c7d613ea52","userId":"4a196058-3f90-48b4-8ed5-1656f5eb1c01","name":"Default v2","isActive":true,"maxNameWeightLargeCapPct":5.00,"maxNameWeightMidCapPct":2.00,"maxNameWeightSmallCapPct":1.00,"maxSectorExposurePct":20.00,"turnoverCapPct":25.00,"weightDeadbandBps":30,"participationCapTier1Pct":10.00,"participationCapTier2Pct":7.50,"participationCapTier3Pct":5.00,"participationCapTier4Pct":3.00,"participationCapTier5Pct":1.00,"spreadThresholdBps":50,"earningsBlackoutHours":48,"liquidityFloorAdvUsd":1000000.00,"costMarginRequiredBps":20,"version":2,"createdAt":"2025-11-06T13:52:23.749518","updatedAt":"2025-11-06T13:52:23.749598"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:24.003 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.007 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.009 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.011 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.088 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.091 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:24.093 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:24.095 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:24.098 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.100 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:24.101 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:24.105 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.180 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.184 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:24.186 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.189 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:24.191 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.194 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.user_id=? and rr1_0.portfolio_id=? and rr1_0.scheduled_date=?
2025-11-06 13:52:24.196 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.user_id=? and cs1_0.is_active
2025-11-06 13:52:24.198 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.200 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.203 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.205 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.207 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.209 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.210 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.213 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.215 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.217 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.219 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.222 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.228 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.287 [main] INFO  c.s.controller.ConstraintController - Preview constraint impact for portfolio: 05b5d112-a3aa-4f3e-bf4f-dfbd01696573
2025-11-06 13:52:24.290 [main] INFO  c.s.service.ConstraintPreviewService - Previewing constraint impact for portfolio 05b5d112-a3aa-4f3e-bf4f-dfbd01696573
2025-11-06 13:52:24.290 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:24.292 [main] DEBUG org.hibernate.SQL - select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.id=?
2025-11-06 13:52:24.297 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.user_id=? and rr1_0.status=? order by rr1_0.completed_at desc fetch first ? rows only
2025-11-06 13:52:24.301 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=?
2025-11-06 13:52:24.303 [main] INFO  c.s.service.ConstraintPreviewService - Found 5 recommendations from last run (2025-11-06T13:22:24.197395)
2025-11-06 13:52:24.305 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:24.308 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=?
2025-11-06 13:52:24.323 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:24.325 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.326 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.326 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.326 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.326 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.329 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:24.331 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:24.333 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:24.335 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:24.335 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:24.337 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0
2025-11-06 13:52:24.339 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.ConstraintSet */delete from constraint_set where id=?
2025-11-06 13:52:24.340 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:24.341 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:24.343 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:24.344 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:24.344 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:24.353 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.355 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.357 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.360 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.436 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.438 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:24.440 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:24.443 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:24.445 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.446 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:24.447 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:24.449 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.524 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.528 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:24.530 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.533 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:24.534 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.536 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.user_id=? and rr1_0.portfolio_id=? and rr1_0.scheduled_date=?
2025-11-06 13:52:24.538 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.user_id=? and cs1_0.is_active
2025-11-06 13:52:24.540 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.542 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.544 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.546 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.547 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.549 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.550 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.552 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.554 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.556 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.558 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.563 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.568 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.605 [main] INFO  c.s.controller.ConstraintController - Update constraints for portfolio: ad989719-c72e-42e2-ab73-39feb10e089a
2025-11-06 13:52:24.606 [main] INFO  c.s.service.ConstraintService - Updating constraints for portfolio: ad989719-c72e-42e2-ab73-39feb10e089a
2025-11-06 13:52:24.607 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:24.609 [main] DEBUG org.hibernate.SQL - select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.id=?
2025-11-06 13:52:24.611 [main] INFO  c.s.service.ConstraintService - Updated constraints for portfolio ad989719-c72e-42e2-ab73-39feb10e089a to version 2
2025-11-06 13:52:24.612 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.613 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.ConstraintSet */update constraint_set set cost_margin_required_bps=?,earnings_blackout_hours=?,is_active=?,liquidity_floor_adv_usd=?,max_name_weight_large_cap_pct=?,max_name_weight_mid_cap_pct=?,max_name_weight_small_cap_pct=?,max_sector_exposure_pct=?,name=?,participation_cap_tier1_pct=?,participation_cap_tier2_pct=?,participation_cap_tier3_pct=?,participation_cap_tier4_pct=?,participation_cap_tier5_pct=?,spread_threshold_bps=?,turnover_cap_pct=?,updated_at=?,user_id=?,version=?,weight_deadband_bps=? where id=?
2025-11-06 13:52:24.614 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.Portfolio */update portfolio set active_constraint_set_id=?,active_universe_id=?,benchmark_return_pct=?,cash_balance=?,last_calculated_at=?,relative_return_pct=?,total_cost_basis=?,total_market_value=?,universe_coverage_pct=?,unrealized_pnl=?,unrealized_pnl_pct=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:24.620 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:24.623 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.623 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.623 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.623 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.623 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.626 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:24.627 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:24.628 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:24.629 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:24.630 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:24.632 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0
2025-11-06 13:52:24.633 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.ConstraintSet */delete from constraint_set where id=?
2025-11-06 13:52:24.633 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.ConstraintSet */delete from constraint_set where id=?
2025-11-06 13:52:24.635 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:24.636 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:24.637 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:24.638 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:24.639 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:24.648 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.650 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.652 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.653 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.728 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.731 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:24.732 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:24.734 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:24.736 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.737 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:24.737 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:24.739 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.814 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.817 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:24.819 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.821 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:24.823 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.825 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.user_id=? and rr1_0.portfolio_id=? and rr1_0.scheduled_date=?
2025-11-06 13:52:24.827 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.user_id=? and cs1_0.is_active
2025-11-06 13:52:24.828 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.830 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.832 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.833 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.834 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.836 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.837 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.839 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.840 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.842 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:24.845 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.847 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.852 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.870 [main] WARN  c.s.c.GlobalExceptionHandler - Validation error: {maxNameWeightLargeCapPct=Max name weight for large cap cannot exceed 100%}
2025-11-06 13:52:24.878 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:24.886 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.886 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.886 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.886 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.886 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:24.889 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:24.890 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:24.891 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:24.892 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:24.893 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:24.894 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0
2025-11-06 13:52:24.895 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.ConstraintSet */delete from constraint_set where id=?
2025-11-06 13:52:24.897 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:24.897 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:24.899 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:24.900 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:24.900 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:24.907 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.909 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.910 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:24.912 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:24.986 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.989 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:24.990 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:24.992 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:24.993 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:24.994 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:24.995 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:24.999 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.073 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.076 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:25.078 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.081 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:25.082 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.085 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.user_id=? and rr1_0.portfolio_id=? and rr1_0.scheduled_date=?
2025-11-06 13:52:25.086 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.user_id=? and cs1_0.is_active
2025-11-06 13:52:25.088 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.091 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:25.093 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.094 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:25.095 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.097 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:25.098 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.099 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:25.100 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.102 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? and r1_0.symbol=?
2025-11-06 13:52:25.103 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.106 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.110 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.119 [main] WARN  c.s.c.GlobalExceptionHandler - Access denied: Access Denied
2025-11-06 13:52:25.122 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:25.124 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:25.124 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:25.124 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:25.124 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:25.125 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Recommendation */delete from recommendation where id=?
2025-11-06 13:52:25.126 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:25.127 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:25.129 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:25.130 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:25.130 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:25.132 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0
2025-11-06 13:52:25.133 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.ConstraintSet */delete from constraint_set where id=?
2025-11-06 13:52:25.134 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:25.135 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:25.138 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:25.139 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:25.139 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
[ERROR] Tests run: 5, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 23.06 s <<< FAILURE! -- in com.stockmonitor.contract.ConstraintContractTest
[ERROR] com.stockmonitor.contract.ConstraintContractTest.testResetConstraints -- Time elapsed: 2.059 s <<< FAILURE!
java.lang.AssertionError: JSON path "$.maxNameWeightLargeCapPct" expected:<10.0> but was:<5.0>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.util.JsonPathExpectationsHelper.assertValue(JsonPathExpectationsHelper.java:123)
	at org.springframework.test.web.servlet.result.JsonPathResultMatchers.lambda$value$2(JsonPathResultMatchers.java:111)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.ConstraintContractTest.testResetConstraints(ConstraintContractTest.java:197)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[INFO] Running com.stockmonitor.contract.RecommendationContractTest
2025-11-06 13:52:25.151 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.contract.RecommendationContractTest]: RecommendationContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:25.162 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.164 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.167 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.169 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.245 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.248 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.249 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:25.251 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.252 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:25.255 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.256 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:25.257 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.266 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:25.267 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:25.268 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:25.269 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:25.270 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:25.271 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:25.277 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.278 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.280 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.281 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.356 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.359 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.360 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:25.362 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.364 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:25.366 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.368 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:25.369 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.374 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.379 [main] INFO  c.s.c.RecommendationController - Get recommendations request for run ID: 99999999-9999-9999-9999-999999999999
2025-11-06 13:52:25.379 [main] INFO  c.s.service.RecommendationService - Fetching recommendations for run 99999999-9999-9999-9999-999999999999
2025-11-06 13:52:25.380 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:25.382 [main] WARN  c.s.c.GlobalExceptionHandler - Resource not found: Recommendation run not found
2025-11-06 13:52:25.385 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:25.387 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:25.388 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:25.389 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:25.390 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:25.392 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:25.399 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.401 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.402 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.404 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.478 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.481 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.482 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:25.483 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.484 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:25.486 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.487 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:25.488 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.491 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.502 [main] INFO  c.s.c.RecommendationController - Trigger recommendation run request: portfolio=00000000-0000-0000-0000-000000000001, universe=null, runType=OFF_CYCLE
2025-11-06 13:52:25.503 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.505 [main] INFO  c.s.service.RecommendationService - Triggering OFF_CYCLE recommendation run for portfolio 00000000-0000-0000-0000-000000000001 with universe 6459b6c6-6884-41fd-82e8-9e674dcaa869
2025-11-06 13:52:25.506 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:25.508 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.user_id=? and cs1_0.is_active
2025-11-06 13:52:25.510 [main] INFO  c.s.service.DataSourceHealthService - Checking data source health with 24 hour freshness threshold
2025-11-06 13:52:25.511 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:25.512 [main] WARN  c.s.service.DataSourceHealthService - No active market data sources found
2025-11-06 13:52:25.512 [main] INFO  c.s.service.RecommendationEngine - Generating recommendations for run d07fe8be-7896-426c-bb19-f92052142d7c using universe S&P 500 and constraints Default Constraints
2025-11-06 13:52:25.526 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:25.527 [main] INFO  c.s.service.RecommendationEngine - Universe contains 0 active constituents
2025-11-06 13:52:25.529 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:25.530 [main] INFO  c.s.service.RecommendationEngine - Generated 0 recommendations for run d07fe8be-7896-426c-bb19-f92052142d7c
2025-11-06 13:52:25.530 [main] INFO  c.s.service.RecommendationService - Recommendation run d07fe8be-7896-426c-bb19-f92052142d7c completed successfully with 0 recommendations
2025-11-06 13:52:25.532 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.533 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.RecommendationRun */update recommendation_run set completed_at=?,constraint_feasibility_check_passed=?,constraint_set_id=?,data_freshness_check_passed=?,decision=?,decision_reason=?,error_message=?,estimated_cost_bps=?,exclusion_count=?,execution_duration_ms=?,expected_alpha_bps=?,expected_turnover_pct=?,portfolio_id=?,previous_run_id=?,recommendation_count=?,run_type=?,scheduled_date=?,started_at=?,status=?,universe_id=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:25.543 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:25.544 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:25.545 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:25.546 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:25.547 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:25.548 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:25.549 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:25.555 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.557 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.558 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.560 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.635 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.638 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.639 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:25.640 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.642 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:25.644 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.645 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:25.645 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.650 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.655 [main] INFO  c.s.c.RecommendationController - Get recommendation run request for ID: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:25.655 [main] INFO  c.s.service.RecommendationService - Fetching recommendation run 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:25.656 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:25.657 [main] WARN  c.s.c.GlobalExceptionHandler - Resource not found: Recommendation run not found
2025-11-06 13:52:25.659 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:25.661 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:25.662 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:25.663 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:25.664 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:25.665 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/runs/00000000-0000-0000-0000-000000000001
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0NSwiZXhwIjoxNzYyNDQwNzQ1fQ.AOGt3Hvc83aVs7Q245u_CmapAKig_Mw5NAeFuX7FcrE"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.RecommendationController
           Method = com.stockmonitor.controller.RecommendationController#getRecommendationRun(UUID)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = java.lang.IllegalArgumentException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"timestamp":"2025-11-06T13:52:25.657440182","status":404,"error":"Not Found","message":"Recommendation run not found","path":"/api/runs/00000000-0000-0000-0000-000000000001","validationErrors":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:25.672 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.673 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.674 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.676 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.750 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.753 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.754 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:25.755 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.756 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:25.757 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.758 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:25.759 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.763 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.767 [main] INFO  c.s.c.RecommendationController - Trigger recommendation run request: portfolio=99999999-9999-9999-9999-999999999999, universe=null, runType=ADHOC
2025-11-06 13:52:25.768 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.768 [main] WARN  c.s.c.GlobalExceptionHandler - Resource not found: Portfolio not found
2025-11-06 13:52:25.771 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:25.772 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:25.773 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:25.774 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:25.775 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:25.776 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:25.781 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.783 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.784 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.785 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.859 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.862 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.863 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:25.864 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.865 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:25.866 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.867 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:25.867 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.871 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.875 [main] INFO  c.s.c.RecommendationController - Get recommendations request for run ID: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:25.875 [main] INFO  c.s.service.RecommendationService - Fetching recommendations for run 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:25.876 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:25.877 [main] WARN  c.s.c.GlobalExceptionHandler - Resource not found: Recommendation run not found
2025-11-06 13:52:25.879 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:25.881 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:25.882 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:25.883 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:25.884 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:25.885 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/runs/00000000-0000-0000-0000-000000000001/recommendations
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0NSwiZXhwIjoxNzYyNDQwNzQ1fQ.AOGt3Hvc83aVs7Q245u_CmapAKig_Mw5NAeFuX7FcrE"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.RecommendationController
           Method = com.stockmonitor.controller.RecommendationController#getRecommendations(UUID)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = java.lang.IllegalArgumentException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"timestamp":"2025-11-06T13:52:25.877229536","status":404,"error":"Not Found","message":"Recommendation run not found","path":"/api/runs/00000000-0000-0000-0000-000000000001/recommendations","validationErrors":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:25.892 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.894 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.895 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:25.897 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.972 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.975 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.976 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:25.977 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.978 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:25.981 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:25.982 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:25.982 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.986 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:25.990 [main] INFO  c.s.c.RecommendationController - Trigger recommendation run request: portfolio=00000000-0000-0000-0000-000000000001, universe=null, runType=OFF_CYCLE
2025-11-06 13:52:25.990 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:25.991 [main] INFO  c.s.service.RecommendationService - Triggering OFF_CYCLE recommendation run for portfolio 00000000-0000-0000-0000-000000000001 with universe 6459b6c6-6884-41fd-82e8-9e674dcaa869
2025-11-06 13:52:25.991 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:25.992 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.user_id=? and cs1_0.is_active
2025-11-06 13:52:25.993 [main] INFO  c.s.service.DataSourceHealthService - Checking data source health with 24 hour freshness threshold
2025-11-06 13:52:25.994 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:25.994 [main] WARN  c.s.service.DataSourceHealthService - No active market data sources found
2025-11-06 13:52:25.994 [main] INFO  c.s.service.RecommendationEngine - Generating recommendations for run 8f32c38d-4b14-462f-8ab8-0a8d17f11b09 using universe S&P 500 and constraints Default Constraints
2025-11-06 13:52:25.995 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:25.996 [main] INFO  c.s.service.RecommendationEngine - Universe contains 0 active constituents
2025-11-06 13:52:25.997 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:25.998 [main] INFO  c.s.service.RecommendationEngine - Generated 0 recommendations for run 8f32c38d-4b14-462f-8ab8-0a8d17f11b09
2025-11-06 13:52:25.998 [main] INFO  c.s.service.RecommendationService - Recommendation run 8f32c38d-4b14-462f-8ab8-0a8d17f11b09 completed successfully with 0 recommendations
2025-11-06 13:52:25.999 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.000 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.RecommendationRun */update recommendation_run set completed_at=?,constraint_feasibility_check_passed=?,constraint_set_id=?,data_freshness_check_passed=?,decision=?,decision_reason=?,error_message=?,estimated_cost_bps=?,exclusion_count=?,execution_duration_ms=?,expected_alpha_bps=?,expected_turnover_pct=?,portfolio_id=?,previous_run_id=?,recommendation_count=?,run_type=?,scheduled_date=?,started_at=?,status=?,universe_id=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:26.004 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:26.005 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:26.006 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:26.007 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:26.008 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:26.009 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.010 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/runs
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0NSwiZXhwIjoxNzYyNDQwNzQ1fQ.AOGt3Hvc83aVs7Q245u_CmapAKig_Mw5NAeFuX7FcrE", Content-Length:"76"]
             Body = {"portfolioId":"00000000-0000-0000-0000-000000000001","runType":"OFF_CYCLE"}
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.RecommendationController
           Method = com.stockmonitor.controller.RecommendationController#triggerRun(TriggerRunRequest)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 202
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":"8f32c38d-4b14-462f-8ab8-0a8d17f11b09","userId":"b0e97f31-0991-4a67-aad3-1938dac8cfd0","universeId":"6459b6c6-6884-41fd-82e8-9e674dcaa869","constraintSetId":"eea119ba-9b42-46d2-93de-242a9010baef","portfolioId":"00000000-0000-0000-0000-000000000001","runType":"OFF_CYCLE","status":"COMPLETED","scheduledDate":"2025-11-06","startedAt":"2025-11-06T13:52:25.994502932","completedAt":"2025-11-06T13:52:25.998262958","executionDurationMs":3,"recommendationCount":0,"exclusionCount":0,"expectedTurnoverPct":null,"estimatedCostBps":0,"expectedAlphaBps":0,"decision":"PENDING","decisionReason":null,"previousRunId":null,"errorMessage":null,"dataFreshnessCheckPassed":false,"constraintFeasibilityCheckPassed":true,"createdAt":null,"updatedAt":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:26.017 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:26.019 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:26.020 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:26.021 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.095 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.098 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.099 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:26.100 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:26.101 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:26.103 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.104 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:26.104 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:26.108 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.111 [main] INFO  c.s.c.RecommendationController - Get recommendations request for run ID: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:26.111 [main] INFO  c.s.service.RecommendationService - Fetching recommendations for run 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:26.111 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:26.112 [main] WARN  c.s.c.GlobalExceptionHandler - Resource not found: Recommendation run not found
2025-11-06 13:52:26.115 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:26.116 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:26.118 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:26.118 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:26.119 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.120 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/runs/00000000-0000-0000-0000-000000000001/recommendations
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0NiwiZXhwIjoxNzYyNDQwNzQ2fQ.lB6EIO8yWYyJ0lt6g6Sp9zt_JOW_9v0RyWLFMl_7u3k"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.RecommendationController
           Method = com.stockmonitor.controller.RecommendationController#getRecommendations(UUID)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = java.lang.IllegalArgumentException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"timestamp":"2025-11-06T13:52:26.112824088","status":404,"error":"Not Found","message":"Recommendation run not found","path":"/api/runs/00000000-0000-0000-0000-000000000001/recommendations","validationErrors":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:26.127 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:26.128 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:26.129 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:26.130 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.205 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.208 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.210 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:26.211 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:26.212 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:26.214 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.215 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:26.215 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:26.220 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.224 [main] INFO  c.s.c.RecommendationController - Get recommendations request for run ID: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:26.224 [main] INFO  c.s.service.RecommendationService - Fetching recommendations for run 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:26.224 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:26.225 [main] WARN  c.s.c.GlobalExceptionHandler - Resource not found: Recommendation run not found
2025-11-06 13:52:26.228 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:26.230 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:26.231 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:26.232 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:26.233 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.234 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/runs/00000000-0000-0000-0000-000000000001/recommendations
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0NiwiZXhwIjoxNzYyNDQwNzQ2fQ.lB6EIO8yWYyJ0lt6g6Sp9zt_JOW_9v0RyWLFMl_7u3k"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.RecommendationController
           Method = com.stockmonitor.controller.RecommendationController#getRecommendations(UUID)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = java.lang.IllegalArgumentException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"timestamp":"2025-11-06T13:52:26.225613263","status":404,"error":"Not Found","message":"Recommendation run not found","path":"/api/runs/00000000-0000-0000-0000-000000000001/recommendations","validationErrors":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:26.240 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:26.241 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:26.243 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:26.244 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.319 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.322 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.324 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:26.326 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:26.328 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:26.329 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.330 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:26.331 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:26.335 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.338 [main] INFO  c.s.c.RecommendationController - Get recommendations request for run ID: 00000000-0000-0000-0000-000000000002
2025-11-06 13:52:26.338 [main] INFO  c.s.service.RecommendationService - Fetching recommendations for run 00000000-0000-0000-0000-000000000002
2025-11-06 13:52:26.339 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:26.340 [main] WARN  c.s.c.GlobalExceptionHandler - Resource not found: Recommendation run not found
2025-11-06 13:52:26.342 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0
2025-11-06 13:52:26.343 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:26.344 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:26.345 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:26.347 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.347 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/runs/00000000-0000-0000-0000-000000000002/recommendations
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0NiwiZXhwIjoxNzYyNDQwNzQ2fQ.lB6EIO8yWYyJ0lt6g6Sp9zt_JOW_9v0RyWLFMl_7u3k"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.RecommendationController
           Method = com.stockmonitor.controller.RecommendationController#getRecommendations(UUID)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = java.lang.IllegalArgumentException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"timestamp":"2025-11-06T13:52:26.339982717","status":404,"error":"Not Found","message":"Recommendation run not found","path":"/api/runs/00000000-0000-0000-0000-000000000002/recommendations","validationErrors":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
[ERROR] Tests run: 10, Failures: 6, Errors: 0, Skipped: 0, Time elapsed: 1.202 s <<< FAILURE! -- in com.stockmonitor.contract.RecommendationContractTest
[ERROR] com.stockmonitor.contract.RecommendationContractTest.testGetRunStatus_Success -- Time elapsed: 0.115 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.RecommendationContractTest.testGetRunStatus_Success(RecommendationContractTest.java:225)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[ERROR] com.stockmonitor.contract.RecommendationContractTest.testGetRecommendations_Ranked -- Time elapsed: 0.109 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.RecommendationContractTest.testGetRecommendations_Ranked(RecommendationContractTest.java:167)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[ERROR] com.stockmonitor.contract.RecommendationContractTest.testTriggerRecommendationRun_DataNotFresh -- Time elapsed: 0.124 s <<< FAILURE!
java.lang.AssertionError: No value at JSON path "$.dataFreshnessSnapshot"
	at org.springframework.test.util.JsonPathExpectationsHelper.evaluateJsonPath(JsonPathExpectationsHelper.java:302)
	at org.springframework.test.util.JsonPathExpectationsHelper.assertExistsAndReturn(JsonPathExpectationsHelper.java:326)
	at org.springframework.test.util.JsonPathExpectationsHelper.exists(JsonPathExpectationsHelper.java:190)
	at org.springframework.test.web.servlet.result.JsonPathResultMatchers.lambda$exists$3(JsonPathResultMatchers.java:123)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.RecommendationContractTest.testTriggerRecommendationRun_DataNotFresh(RecommendationContractTest.java:100)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: com.jayway.jsonpath.PathNotFoundException: No results for path: $['dataFreshnessSnapshot']

[ERROR] com.stockmonitor.contract.RecommendationContractTest.testGetRecommendations_WithDriverExplanations -- Time elapsed: 0.108 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.RecommendationContractTest.testGetRecommendations_WithDriverExplanations(RecommendationContractTest.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[ERROR] com.stockmonitor.contract.RecommendationContractTest.testGetRecommendations_Success -- Time elapsed: 0.112 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.RecommendationContractTest.testGetRecommendations_Success(RecommendationContractTest.java:146)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[ERROR] com.stockmonitor.contract.RecommendationContractTest.testGetRecommendations_RunNotCompleted -- Time elapsed: 0.113 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.RecommendationContractTest.testGetRecommendations_RunNotCompleted(RecommendationContractTest.java:212)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[INFO] Running com.stockmonitor.contract.AuthContractTest
2025-11-06 13:52:26.355 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.contract.AuthContractTest]: AuthContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:26.384 [main] INFO  c.s.controller.AuthController - Registration request received for email: newuser@example.com
2025-11-06 13:52:26.384 [main] INFO  c.stockmonitor.service.UserService - Registering new user with email: newuser@example.com
2025-11-06 13:52:26.390 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id from app_user u1_0 where u1_0.email=? fetch first ? rows only
2025-11-06 13:52:26.466 [main] INFO  c.stockmonitor.service.UserService - User registered successfully with ID: eed7cd67-3c1b-4046-b07b-8868ab505e6c
2025-11-06 13:52:26.468 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.480 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.481 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:26.490 [main] WARN  c.s.c.GlobalExceptionHandler - Validation error: {email=Email must be valid}
2025-11-06 13:52:26.493 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.502 [main] WARN  c.s.c.GlobalExceptionHandler - Validation error: {password=Password must be at least 8 characters}
2025-11-06 13:52:26.504 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.512 [main] INFO  c.s.controller.AuthController - Registration request received for email: login@example.com
2025-11-06 13:52:26.513 [main] INFO  c.stockmonitor.service.UserService - Registering new user with email: login@example.com
2025-11-06 13:52:26.514 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id from app_user u1_0 where u1_0.email=? fetch first ? rows only
2025-11-06 13:52:26.588 [main] INFO  c.stockmonitor.service.UserService - User registered successfully with ID: 4df80676-ef2d-4ad7-82a7-116a6ddf0360
2025-11-06 13:52:26.590 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.599 [main] INFO  c.s.controller.AuthController - Login request received for email: login@example.com
2025-11-06 13:52:26.600 [main] INFO  c.stockmonitor.service.UserService - Login attempt for email: login@example.com
2025-11-06 13:52:26.601 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.676 [main] INFO  c.stockmonitor.service.UserService - User logged in successfully: login@example.com
2025-11-06 13:52:26.678 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.User */update app_user set base_currency=?,disclaimer_accepted_at=?,email=?,email_verified=?,enabled=?,first_name=?,last_login_at=?,last_name=?,notification_preferences=?,password_hash=?,role=?,selected_universe_id=?,timezone=?,updated_at=? where id=?
2025-11-06 13:52:26.684 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.685 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:26.692 [main] INFO  c.s.controller.AuthController - Registration request received for email: duplicate@example.com
2025-11-06 13:52:26.692 [main] INFO  c.stockmonitor.service.UserService - Registering new user with email: duplicate@example.com
2025-11-06 13:52:26.693 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id from app_user u1_0 where u1_0.email=? fetch first ? rows only
2025-11-06 13:52:26.767 [main] INFO  c.stockmonitor.service.UserService - User registered successfully with ID: 8892e3f8-f507-43bc-96f1-a83396e0d6e6
2025-11-06 13:52:26.768 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.773 [main] INFO  c.s.controller.AuthController - Registration request received for email: duplicate@example.com
2025-11-06 13:52:26.773 [main] INFO  c.stockmonitor.service.UserService - Registering new user with email: duplicate@example.com
2025-11-06 13:52:26.774 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id from app_user u1_0 where u1_0.email=? fetch first ? rows only
2025-11-06 13:52:26.777 [main] WARN  c.s.c.GlobalExceptionHandler - Illegal state: Email already registered
2025-11-06 13:52:26.779 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.781 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:26.788 [main] WARN  c.s.c.GlobalExceptionHandler - Validation error: {password=Password is required}
2025-11-06 13:52:26.790 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.797 [main] INFO  c.s.controller.AuthController - Login request received for email: nonexistent@example.com
2025-11-06 13:52:26.797 [main] INFO  c.stockmonitor.service.UserService - Login attempt for email: nonexistent@example.com
2025-11-06 13:52:26.798 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.799 [main] WARN  c.s.c.GlobalExceptionHandler - Authentication failed: Invalid email or password
2025-11-06 13:52:26.802 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.452 s -- in com.stockmonitor.contract.AuthContractTest
[INFO] Running com.stockmonitor.contract.UniverseContractTest
2025-11-06 13:52:26.808 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.contract.UniverseContractTest]: UniverseContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:26.816 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.891 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.913 [main] DEBUG org.hibernate.SQL - /* select count(*) from Universe x */ select count(*) from universe u1_0
2025-11-06 13:52:26.918 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.920 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:26.921 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:26.922 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:26.923 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:26.924 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:26.925 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:26.929 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:26.933 [main] INFO  c.s.controller.UniverseController - Select universe 99999999-9999-9999-9999-999999999999 for portfolio 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:26.934 [main] INFO  c.s.service.UniverseService - Selecting universe 99999999-9999-9999-9999-999999999999 for portfolio 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:26.934 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:26.935 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:26.936 [main] WARN  c.s.c.GlobalExceptionHandler - Universe not found: Universe not found
2025-11-06 13:52:26.939 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0
2025-11-06 13:52:26.940 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:26.941 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:26.943 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:26.944 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:26.944 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:26.945 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:26.946 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:26.947 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:26.953 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.028 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.031 [main] DEBUG org.hibernate.SQL - /* select count(*) from Universe x */ select count(*) from universe u1_0
2025-11-06 13:52:27.033 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.040 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.041 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.042 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.043 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.044 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.049 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.050 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.051 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.052 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.053 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.053 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.054 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.055 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.056 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.058 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.060 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.061 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.063 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:27.065 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.065 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:27.066 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.071 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.073 [main] INFO  c.s.controller.UniverseController - Select universe 00000000-0000-0000-0000-000000000001 for portfolio 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:27.074 [main] INFO  c.s.service.UniverseService - Selecting universe 00000000-0000-0000-0000-000000000001 for portfolio 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:27.074 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.075 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.076 [main] WARN  c.s.c.GlobalExceptionHandler - Universe not found: Universe not found
2025-11-06 13:52:27.079 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0
2025-11-06 13:52:27.082 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.082 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.082 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.082 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.082 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.082 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.083 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.083 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.083 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.085 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:27.086 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:27.087 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.088 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.088 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.089 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.090 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:27.091 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /api/portfolios/00000000-0000-0000-0000-000000000001/universe
       Parameters = {universeId=[00000000-0000-0000-0000-000000000001]}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0NywiZXhwIjoxNzYyNDQwNzQ3fQ.ASgorZCVG-LiaCF2re_BoueHyYUiZFmrZzCWhtzCqIA"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.UniverseController
           Method = com.stockmonitor.controller.UniverseController#selectUniverse(UUID, UUID)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = com.stockmonitor.service.UniverseService$NotFoundException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"timestamp":"2025-11-06T13:52:27.076241587","status":404,"error":"Not Found","message":"Universe not found","path":"/api/portfolios/00000000-0000-0000-0000-000000000001/universe","validationErrors":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:27.099 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.174 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.177 [main] DEBUG org.hibernate.SQL - /* select count(*) from Universe x */ select count(*) from universe u1_0
2025-11-06 13:52:27.178 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.179 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.182 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.183 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.184 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.185 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.186 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.188 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.189 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.190 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.191 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.192 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.193 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.193 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.194 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.196 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.197 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.199 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.200 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:27.202 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.202 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:27.203 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.206 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.210 [main] INFO  c.s.controller.UniverseController - Get all universes request
2025-11-06 13:52:27.210 [main] INFO  c.s.service.UniverseService - Fetching all active universes
2025-11-06 13:52:27.211 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.is_active
2025-11-06 13:52:27.214 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:27.217 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:27.218 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:27.258 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0
2025-11-06 13:52:27.260 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.260 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.260 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.260 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.260 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.261 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.261 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.261 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.261 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.263 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:27.264 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:27.265 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.266 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.266 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.266 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.267 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:27.268 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:27.275 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.350 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.352 [main] DEBUG org.hibernate.SQL - /* select count(*) from Universe x */ select count(*) from universe u1_0
2025-11-06 13:52:27.353 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.355 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.355 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.357 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.358 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.359 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.360 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.361 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.362 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.363 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.364 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.365 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.367 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.369 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.371 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.373 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.374 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.375 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.377 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:27.379 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.379 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:27.380 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.383 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.386 [main] INFO  c.s.controller.UniverseController - Get universe request for ID: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:27.387 [main] INFO  c.s.service.UniverseService - Fetching universe: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:27.387 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.388 [main] WARN  c.s.c.GlobalExceptionHandler - Universe not found: Universe not found
2025-11-06 13:52:27.391 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0
2025-11-06 13:52:27.394 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.394 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.394 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.394 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.394 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.394 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.395 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.395 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.395 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.397 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:27.399 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:27.400 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.402 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.402 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.402 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.403 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:27.404 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/universes/00000000-0000-0000-0000-000000000001
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0NywiZXhwIjoxNzYyNDQwNzQ3fQ.ASgorZCVG-LiaCF2re_BoueHyYUiZFmrZzCWhtzCqIA"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.UniverseController
           Method = com.stockmonitor.controller.UniverseController#getUniverse(UUID)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = com.stockmonitor.service.UniverseService$NotFoundException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"timestamp":"2025-11-06T13:52:27.388790793","status":404,"error":"Not Found","message":"Universe not found","path":"/api/universes/00000000-0000-0000-0000-000000000001","validationErrors":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:27.410 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.484 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.486 [main] DEBUG org.hibernate.SQL - /* select count(*) from Universe x */ select count(*) from universe u1_0
2025-11-06 13:52:27.488 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.489 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.490 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.491 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.492 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.493 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.494 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.494 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.495 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.496 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.497 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.498 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.499 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.499 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.500 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.501 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.502 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.503 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.504 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:27.505 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.506 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:27.506 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.509 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.512 [main] INFO  c.s.controller.UniverseController - Get all universes request
2025-11-06 13:52:27.512 [main] INFO  c.s.service.UniverseService - Fetching all active universes
2025-11-06 13:52:27.513 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.is_active
2025-11-06 13:52:27.514 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:27.515 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:27.516 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:27.537 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0
2025-11-06 13:52:27.538 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.539 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.539 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.539 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.539 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.539 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.539 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.540 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.540 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.541 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:27.542 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:27.543 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.544 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.544 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.544 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.545 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:27.546 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:27.553 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.628 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.629 [main] DEBUG org.hibernate.SQL - /* select count(*) from Universe x */ select count(*) from universe u1_0
2025-11-06 13:52:27.630 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.631 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.632 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.633 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.634 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.635 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.636 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.636 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.637 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.638 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.639 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.640 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.641 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.642 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.643 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.644 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.645 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.646 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.647 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:27.648 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.648 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:27.649 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.663 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0
2025-11-06 13:52:27.667 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.667 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.668 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.668 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.668 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.668 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.668 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.668 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.668 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.671 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:27.672 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:27.673 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.675 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.675 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.675 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.676 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:27.677 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:27.686 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.771 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.775 [main] DEBUG org.hibernate.SQL - /* select count(*) from Universe x */ select count(*) from universe u1_0
2025-11-06 13:52:27.777 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.778 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.779 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.779 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.780 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.780 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.782 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.783 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.783 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.784 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.784 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.785 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.786 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.786 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.787 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.UniverseConstituent */insert into universe_constituent (added_date,avg_daily_value,avg_daily_volume,company_name,created_at,industry,is_active,liquidity_tier,market_cap_tier,removed_date,sector,symbol,universe_id,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.790 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.792 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.794 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.795 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:27.799 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.800 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:27.801 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:27.806 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.810 [main] INFO  c.s.controller.UniverseController - Get universe request for ID: 99999999-9999-9999-9999-999999999999
2025-11-06 13:52:27.810 [main] INFO  c.s.service.UniverseService - Fetching universe: 99999999-9999-9999-9999-999999999999
2025-11-06 13:52:27.810 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:27.812 [main] WARN  c.s.c.GlobalExceptionHandler - Universe not found: Universe not found
2025-11-06 13:52:27.815 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0
2025-11-06 13:52:27.818 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.818 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.818 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.818 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.818 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.819 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.819 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.819 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.819 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.UniverseConstituent */delete from universe_constituent where id=?
2025-11-06 13:52:27.821 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:27.822 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:27.823 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:27.824 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.824 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.824 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Universe */delete from universe where id=?
2025-11-06 13:52:27.825 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:27.826 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
[ERROR] Tests run: 7, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 1.023 s <<< FAILURE! -- in com.stockmonitor.contract.UniverseContractTest
[ERROR] com.stockmonitor.contract.UniverseContractTest.testSelectUniverseForPortfolio_Success -- Time elapsed: 0.143 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.UniverseContractTest.testSelectUniverseForPortfolio_Success(UniverseContractTest.java:226)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[ERROR] com.stockmonitor.contract.UniverseContractTest.testGetUniverseById_Success -- Time elapsed: 0.135 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.UniverseContractTest.testGetUniverseById_Success(UniverseContractTest.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[INFO] Running com.stockmonitor.contract.BacktestContractTest
2025-11-06 13:52:27.834 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.contract.BacktestContractTest]: BacktestContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:27.861 [main] INFO  c.s.controller.BacktestController - Run backtest request for portfolio: 00000000-0000-0000-0000-000000000001

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/backtests
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"137"]
             Body = {
  "portfolioId": "00000000-0000-0000-0000-000000000001",
  "startDate": "2024-01-01",
  "endDate": "2022-01-01",
  "constraints": {}
}

    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.BacktestController
           Method = com.stockmonitor.controller.BacktestController#runBacktest(BacktestRequest)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = [X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:27.877 [main] INFO  c.s.controller.BacktestController - Run backtest request for portfolio: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:27.880 [main] WARN  c.s.c.GlobalExceptionHandler - Illegal argument: Invalid return type for async method (only Future and void supported): class com.stockmonitor.dto.BacktestDTO

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/backtests
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"313"]
             Body = {
  "portfolioId": "00000000-0000-0000-0000-000000000001",
  "startDate": "2022-01-01",
  "endDate": "2024-01-01",
  "constraints": {
    "maxPositionSizePct": 10.0,
    "maxSectorExposurePct": 25.0,
    "maxTurnoverPct": 50.0,
    "minMarketCapBn": 2.0,
    "cashBufferPct": 5.0,
    "minLiquidityTier": 2
  }
}

    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.BacktestController
           Method = com.stockmonitor.controller.BacktestController#runBacktest(BacktestRequest)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = java.lang.IllegalArgumentException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"timestamp":"2025-11-06T13:52:27.880496083","status":400,"error":"Bad Request","message":"Invalid return type for async method (only Future and void supported): class com.stockmonitor.dto.BacktestDTO","path":"/api/backtests","validationErrors":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:27.889 [main] INFO  c.s.controller.BacktestController - Get backtest results: df23eb1a-8e51-46e4-bb46-51761b31fe8b

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/backtests/df23eb1a-8e51-46e4-bb46-51761b31fe8b
       Parameters = {}
          Headers = []
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.BacktestController
           Method = com.stockmonitor.controller.BacktestController#getBacktest(UUID)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:27.898 [main] WARN  c.s.c.GlobalExceptionHandler - Access denied: Access Denied
[ERROR] Tests run: 4, Failures: 3, Errors: 0, Skipped: 0, Time elapsed: 0.069 s <<< FAILURE! -- in com.stockmonitor.contract.BacktestContractTest
[ERROR] com.stockmonitor.contract.BacktestContractTest.testBacktestValidatesDateRange -- Time elapsed: 0.031 s <<< FAILURE!
java.lang.AssertionError: No value at JSON path "$.message"
	at org.springframework.test.util.JsonPathExpectationsHelper.evaluateJsonPath(JsonPathExpectationsHelper.java:302)
	at org.springframework.test.util.JsonPathExpectationsHelper.assertValue(JsonPathExpectationsHelper.java:99)
	at org.springframework.test.web.servlet.result.JsonPathResultMatchers.lambda$value$2(JsonPathResultMatchers.java:111)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.BacktestContractTest.testBacktestValidatesDateRange(BacktestContractTest.java:134)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.IllegalArgumentException: json can not be null or empty
	at com.jayway.jsonpath.internal.Utils.notEmpty(Utils.java:401)
	at com.jayway.jsonpath.JsonPath.read(JsonPath.java:390)
	at com.jayway.jsonpath.JsonPath.read(JsonPath.java:377)
	at org.springframework.test.util.JsonPathExpectationsHelper.evaluateJsonPath(JsonPathExpectationsHelper.java:299)
	... 73 more

[ERROR] com.stockmonitor.contract.BacktestContractTest.testRunBacktest -- Time elapsed: 0.011 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<400>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.BacktestContractTest.testRunBacktest(BacktestContractTest.java:58)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[ERROR] com.stockmonitor.contract.BacktestContractTest.testGetBacktestResults -- Time elapsed: 0.007 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.BacktestContractTest.testGetBacktestResults(BacktestContractTest.java:79)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[INFO] Running com.stockmonitor.contract.PortfolioContractTest
2025-11-06 13:52:27.904 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.contract.PortfolioContractTest]: PortfolioContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:27.912 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.987 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.990 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:27.991 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.995 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:27.995 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.997 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:27.997 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Universe */insert into universe (benchmark_symbol,constituent_count,created_at,description,effective_date,is_active,liquidity_tier_threshold,max_market_cap,min_market_cap,name,type,updated_at,version,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:27.998 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:27.999 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:28.000 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.001 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:28.002 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.003 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:28.003 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.004 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.005 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.006 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.007 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.007 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.008 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.011 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.015 [main] INFO  c.s.controller.PortfolioController - Get performance for portfolio: 00000000-0000-0000-0000-000000000001 from null to null
2025-11-06 13:52:28.015 [main] INFO  c.s.s.PerformanceAttributionService - Calculating performance for portfolio 00000000-0000-0000-0000-000000000001 from null to null
2025-11-06 13:52:28.016 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:28.032 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:28.033 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.033 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.034 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.035 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:28.035 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:28.036 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:28.037 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/portfolios/00000000-0000-0000-0000-000000000001/performance
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0NywiZXhwIjoxNzYyNDQwNzQ3fQ.ASgorZCVG-LiaCF2re_BoueHyYUiZFmrZzCWhtzCqIA"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.PortfolioController
           Method = com.stockmonitor.controller.PortfolioController#getPerformance(UUID, LocalDate, LocalDate)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"totalPnL":0E-7,"totalPnLPct":0.0000,"benchmarkReturn":3.0,"excessReturn":-3.0000,"topContributors":[],"topDetractors":[],"periodStart":null,"periodEnd":null,"startingValue":26250.0000000,"endingValue":26250.0000000,"tradeCount":0,"transactionCosts":0}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:28.043 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.118 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.120 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.122 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.122 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.123 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.124 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:28.125 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.126 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:28.128 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.128 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:28.129 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.130 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.131 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.132 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.132 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.133 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.134 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.138 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.141 [main] INFO  c.s.controller.PortfolioController - Get portfolio request for ID: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:28.141 [main] INFO  c.s.service.PortfolioService - Getting portfolio: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:28.142 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.149 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:28.150 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.150 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.150 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.151 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:28.152 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:28.153 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:28.153 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:28.158 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.233 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.235 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.237 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.239 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.240 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.241 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:28.242 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.243 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:28.244 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.245 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:28.245 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.246 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.247 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.248 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.249 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.250 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.251 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.263 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:28.265 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.265 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.265 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.266 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:28.268 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:28.269 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:28.270 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:28.275 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.350 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.352 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.354 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.355 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.356 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.357 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:28.358 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.359 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:28.360 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.361 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:28.362 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.363 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.364 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.365 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.366 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.366 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.367 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.370 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.381 [main] INFO  c.s.controller.PortfolioController - Upload holdings request for portfolio: 00000000-0000-0000-0000-000000000001, file: holdings.csv
2025-11-06 13:52:28.381 [main] INFO  c.s.service.PortfolioService - Uploading holdings for portfolio: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:28.381 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.383 [main] WARN  c.s.c.GlobalExceptionHandler - Illegal argument: Missing required columns: cost_basis, currency
2025-11-06 13:52:28.385 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:28.386 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.386 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.386 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.387 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:28.387 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:28.388 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:28.389 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:28.395 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.469 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.471 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.472 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.473 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.475 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.476 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:28.477 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.478 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:28.479 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.480 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:28.480 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.482 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.483 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.484 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.484 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.485 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.486 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.488 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.491 [main] INFO  c.s.controller.PortfolioController - Get performance for portfolio: 00000000-0000-0000-0000-000000000001 from null to null
2025-11-06 13:52:28.492 [main] INFO  c.s.s.PerformanceAttributionService - Calculating performance for portfolio 00000000-0000-0000-0000-000000000001 from null to null
2025-11-06 13:52:28.492 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:28.496 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:28.497 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.497 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.497 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.498 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:28.499 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:28.501 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:28.501 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/portfolios/00000000-0000-0000-0000-000000000001/performance
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0OCwiZXhwIjoxNzYyNDQwNzQ4fQ.hYsLiu53OcFl3DtYy1wE7bjxZR8Y5zBvihpmhxN1AUk"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.PortfolioController
           Method = com.stockmonitor.controller.PortfolioController#getPerformance(UUID, LocalDate, LocalDate)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"totalPnL":0E-7,"totalPnLPct":0.0000,"benchmarkReturn":3.0,"excessReturn":-3.0000,"topContributors":[],"topDetractors":[],"periodStart":null,"periodEnd":null,"startingValue":26250.0000000,"endingValue":26250.0000000,"tradeCount":0,"transactionCosts":0}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:28.508 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.583 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.585 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.586 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.587 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.588 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.589 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:28.590 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.590 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:28.591 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.592 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:28.592 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.593 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.594 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.595 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.596 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.596 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.597 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.600 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.602 [main] INFO  c.s.controller.PortfolioController - Upload holdings request for portfolio: 00000000-0000-0000-0000-000000000001, file: holdings.csv
2025-11-06 13:52:28.602 [main] INFO  c.s.service.PortfolioService - Uploading holdings for portfolio: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:28.603 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.606 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 0 holdings with 2 validation errors
2025-11-06 13:52:28.606 [main] WARN  c.s.service.PortfolioService - Validation errors found in CSV: 2
2025-11-06 13:52:28.612 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:28.613 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.614 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.614 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.614 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:28.615 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:28.616 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:28.616 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/portfolios/00000000-0000-0000-0000-000000000001/holdings/upload
       Parameters = {}
          Headers = [Content-Type:"multipart/form-data;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE0OCwiZXhwIjoxNzYyNDQwNzQ4fQ.hYsLiu53OcFl3DtYy1wE7bjxZR8Y5zBvihpmhxN1AUk"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.PortfolioController
           Method = com.stockmonitor.controller.PortfolioController#uploadHoldings(UUID, MultipartFile)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"totalHoldings":0,"marketValue":0,"uploadedAt":"2025-11-06T13:52:28.607298279","validationErrors":[{"row":2,"column":"quantity","errorCode":"INVALID_NUMBER","message":"Row 2: Invalid quantity 'invalid'"},{"row":3,"column":"quantity","errorCode":"NEGATIVE_QUANTITY","message":"Row 3: Quantity cannot be negative or zero (-50.00 shares)"}]}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:28.622 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.697 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.699 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.701 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.701 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.702 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.703 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:28.704 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.704 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:28.707 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.707 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:28.708 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.709 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.710 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.711 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.711 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.712 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.713 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.716 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.718 [main] INFO  c.s.controller.PortfolioController - Upload holdings request for portfolio: 00000000-0000-0000-0000-000000000001, file: holdings.csv
2025-11-06 13:52:28.718 [main] INFO  c.s.service.PortfolioService - Uploading holdings for portfolio: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:28.719 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.721 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 3 holdings with 0 validation errors
2025-11-06 13:52:28.722 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:28.723 [main] INFO  c.s.service.PortfolioService - Cleared existing holdings for portfolio: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:28.724 [main] INFO  c.s.service.PortfolioService - Successfully uploaded 3 holdings with total market value: 92550.00
2025-11-06 13:52:28.724 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.725 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.725 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.726 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.Portfolio */update portfolio set active_constraint_set_id=?,active_universe_id=?,benchmark_return_pct=?,cash_balance=?,last_calculated_at=?,relative_return_pct=?,total_cost_basis=?,total_market_value=?,universe_coverage_pct=?,unrealized_pnl=?,unrealized_pnl_pct=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:28.726 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.726 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.726 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.733 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:28.733 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.733 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.734 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.734 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:28.735 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:28.735 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:28.736 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:28.741 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.815 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.817 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.818 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.819 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.820 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.821 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:28.822 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.822 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:28.823 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.824 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:28.824 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.825 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.826 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.827 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.827 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.828 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.829 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.831 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.834 [main] INFO  c.s.controller.PortfolioController - Get portfolio request for ID: 99999999-9999-9999-9999-999999999999
2025-11-06 13:52:28.834 [main] INFO  c.s.service.PortfolioService - Getting portfolio: 99999999-9999-9999-9999-999999999999
2025-11-06 13:52:28.834 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.835 [main] WARN  c.s.c.GlobalExceptionHandler - Resource not found: Portfolio not found
2025-11-06 13:52:28.837 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:28.838 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.838 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.838 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.839 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:28.840 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:28.841 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:28.841 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:28.846 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.921 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.924 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.925 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.926 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:28.927 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.928 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:28.929 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.930 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:28.931 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.932 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:28.932 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.933 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.934 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.935 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.936 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.937 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:28.937 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:28.940 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:28.942 [main] INFO  c.s.controller.PortfolioController - Upload holdings request for portfolio: 00000000-0000-0000-0000-000000000001, file: holdings.csv
2025-11-06 13:52:28.942 [main] INFO  c.s.service.PortfolioService - Uploading holdings for portfolio: 00000000-0000-0000-0000-000000000001
2025-11-06 13:52:28.943 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:28.944 [main] WARN  c.s.c.GlobalExceptionHandler - Illegal argument: CSV file is empty
2025-11-06 13:52:28.946 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:28.946 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.946 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.947 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:28.947 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:28.948 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:28.948 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:28.949 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
2025-11-06 13:52:28.955 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:29.029 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.031 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:29.032 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:29.033 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.name=?
2025-11-06 13:52:29.034 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:29.035 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0
2025-11-06 13:52:29.035 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:29.036 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:29.037 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.038 [main] DEBUG org.hibernate.SQL - /* dynamic native SQL query */ INSERT INTO portfolio (id, user_id, cash_balance, total_market_value, total_cost_basis, unrealized_pnl, unrealized_pnl_pct, benchmark_return_pct, relative_return_pct, universe_coverage_pct, active_universe_id, active_constraint_set_id, last_calculated_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06 13:52:29.038 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:29.039 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:29.040 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.042 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:29.042 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.043 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=? and h1_0.symbol=?
2025-11-06 13:52:29.045 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.048 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:29.054 [main] INFO  c.s.controller.PortfolioController - Get performance for portfolio: 00000000-0000-0000-0000-000000000001 from 2024-10-01 to 2024-10-31
2025-11-06 13:52:29.054 [main] INFO  c.s.s.PerformanceAttributionService - Calculating performance for portfolio 00000000-0000-0000-0000-000000000001 from 2024-10-01 to 2024-10-31
2025-11-06 13:52:29.055 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:29.058 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0
2025-11-06 13:52:29.058 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:29.059 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:29.059 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Holding */delete from holding where id=?
2025-11-06 13:52:29.060 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0
2025-11-06 13:52:29.060 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.Portfolio */delete from portfolio where id=?
2025-11-06 13:52:29.061 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0
2025-11-06 13:52:29.062 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.User */delete from app_user where id=?
[ERROR] Tests run: 10, Failures: 3, Errors: 0, Skipped: 0, Time elapsed: 1.162 s <<< FAILURE! -- in com.stockmonitor.contract.PortfolioContractTest
[ERROR] com.stockmonitor.contract.PortfolioContractTest.testGetPortfolioPerformance_Success -- Time elapsed: 0.130 s <<< FAILURE!
java.lang.AssertionError: No value at JSON path "$.periodStart"
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:37)
	at org.springframework.test.util.AssertionErrors.assertTrue(AssertionErrors.java:70)
	at org.springframework.test.util.JsonPathExpectationsHelper.assertExistsAndReturn(JsonPathExpectationsHelper.java:328)
	at org.springframework.test.util.JsonPathExpectationsHelper.exists(JsonPathExpectationsHelper.java:190)
	at org.springframework.test.web.servlet.result.JsonPathResultMatchers.lambda$exists$3(JsonPathResultMatchers.java:123)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.PortfolioContractTest.testGetPortfolioPerformance_Success(PortfolioContractTest.java:234)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[ERROR] com.stockmonitor.contract.PortfolioContractTest.testGetPortfolioPerformance_ContributorsIncludeDetails -- Time elapsed: 0.112 s <<< FAILURE!
java.lang.AssertionError: No value at JSON path "$.topContributors[0].symbol"
	at org.springframework.test.util.JsonPathExpectationsHelper.evaluateJsonPath(JsonPathExpectationsHelper.java:302)
	at org.springframework.test.util.JsonPathExpectationsHelper.assertExistsAndReturn(JsonPathExpectationsHelper.java:326)
	at org.springframework.test.util.JsonPathExpectationsHelper.exists(JsonPathExpectationsHelper.java:190)
	at org.springframework.test.web.servlet.result.JsonPathResultMatchers.lambda$exists$3(JsonPathResultMatchers.java:123)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.PortfolioContractTest.testGetPortfolioPerformance_ContributorsIncludeDetails(PortfolioContractTest.java:251)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: com.jayway.jsonpath.PathNotFoundException: No results for path: $['topContributors'][0]['symbol']

[ERROR] com.stockmonitor.contract.PortfolioContractTest.testUploadHoldings_InvalidCsv -- Time elapsed: 0.113 s <<< FAILURE!
java.lang.AssertionError: Status expected:<400> but was:<200>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.PortfolioContractTest.testUploadHoldings_InvalidCsv(PortfolioContractTest.java:124)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[INFO] Running com.stockmonitor.contract.ExclusionContractTest
2025-11-06 13:52:29.068 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.contract.ExclusionContractTest]: ExclusionContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:29.076 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:29.077 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.082 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Exclusion */insert into exclusion (created_at,current_price,exclusion_reason_code,exclusion_reason_text,failed_constraint_name,failed_constraint_threshold,failed_constraint_value,liquidity_tier,market_cap_tier,run_id,sector,symbol,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.083 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Exclusion */insert into exclusion (created_at,current_price,exclusion_reason_code,exclusion_reason_text,failed_constraint_name,failed_constraint_threshold,failed_constraint_value,liquidity_tier,market_cap_tier,run_id,sector,symbol,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.087 [main] INFO  c.s.c.RecommendationController - Get exclusions for run: e76c77c9-ffc0-4c02-9f0a-4ee5b9179212
2025-11-06 13:52:29.087 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:29.088 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select e1_0.id,e1_0.created_at,e1_0.current_price,e1_0.exclusion_reason_code,e1_0.exclusion_reason_text,e1_0.failed_constraint_name,e1_0.failed_constraint_threshold,e1_0.failed_constraint_value,e1_0.liquidity_tier,e1_0.market_cap_tier,e1_0.run_id,e1_0.sector,e1_0.symbol from exclusion e1_0 where e1_0.run_id=?
2025-11-06 13:52:29.098 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:29.099 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.100 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Exclusion */insert into exclusion (created_at,current_price,exclusion_reason_code,exclusion_reason_text,failed_constraint_name,failed_constraint_threshold,failed_constraint_value,liquidity_tier,market_cap_tier,run_id,sector,symbol,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.101 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Exclusion */insert into exclusion (created_at,current_price,exclusion_reason_code,exclusion_reason_text,failed_constraint_name,failed_constraint_threshold,failed_constraint_value,liquidity_tier,market_cap_tier,run_id,sector,symbol,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.105 [main] INFO  c.s.c.RecommendationController - Export exclusions for run: 0fd211ea-77b7-443a-ae21-cda8d49afde8
2025-11-06 13:52:29.105 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:29.106 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select e1_0.id,e1_0.created_at,e1_0.current_price,e1_0.exclusion_reason_code,e1_0.exclusion_reason_text,e1_0.failed_constraint_name,e1_0.failed_constraint_threshold,e1_0.failed_constraint_value,e1_0.liquidity_tier,e1_0.market_cap_tier,e1_0.run_id,e1_0.sector,e1_0.symbol from exclusion e1_0 where e1_0.run_id=?
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.046 s -- in com.stockmonitor.contract.ExclusionContractTest
[INFO] Running com.stockmonitor.contract.WebSocketContractTest
2025-11-06 13:52:29.117 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.contract.WebSocketContractTest]: WebSocketContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:29.135 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.302 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-06 13:52:29.303 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-06 13:52:29.489 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:29.490 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:29.491 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:29.491 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:29.498 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.514 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:29.515 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:29.522 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.526 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:29.527 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:29.534 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.535 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:29.536 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:29.541 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:29.542 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:29.542 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:29.546 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:32.567 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:32.568 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:32.575 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:32.576 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:32.577 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:32.582 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.594 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:35.595 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.483 s -- in com.stockmonitor.contract.WebSocketContractTest
[INFO] Running com.stockmonitor.contract.FactorContractTest
2025-11-06 13:52:35.600 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.contract.FactorContractTest]: FactorContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:35.608 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:35.609 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Portfolio */insert into portfolio (active_constraint_set_id,active_universe_id,benchmark_return_pct,cash_balance,created_at,last_calculated_at,relative_return_pct,total_cost_basis,total_market_value,universe_coverage_pct,unrealized_pnl,unrealized_pnl_pct,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.610 [main] DEBUG org.hibernate.SQL - select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.id=?
2025-11-06 13:52:35.611 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.612 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.615 [main] INFO  c.s.controller.FactorController - Get factors for portfolio: ed0f3bcc-d822-4eb4-9bc2-8a6aa3981f2f
2025-11-06 13:52:35.616 [main] INFO  c.stockmonitor.service.FactorService - Getting factor scores for portfolio: ed0f3bcc-d822-4eb4-9bc2-8a6aa3981f2f
2025-11-06 13:52:35.616 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:35.638 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:35.639 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Portfolio */insert into portfolio (active_constraint_set_id,active_universe_id,benchmark_return_pct,cash_balance,created_at,last_calculated_at,relative_return_pct,total_cost_basis,total_market_value,universe_coverage_pct,unrealized_pnl,unrealized_pnl_pct,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.639 [main] DEBUG org.hibernate.SQL - select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.id=?
2025-11-06 13:52:35.640 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.640 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.643 [main] INFO  c.s.controller.FactorController - Get factors for portfolio: 0d8ea362-326a-422b-9436-08392a63ca1e
2025-11-06 13:52:35.643 [main] INFO  c.stockmonitor.service.FactorService - Getting factor scores for portfolio: 0d8ea362-326a-422b-9436-08392a63ca1e
2025-11-06 13:52:35.644 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:35.649 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:35.650 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Portfolio */insert into portfolio (active_constraint_set_id,active_universe_id,benchmark_return_pct,cash_balance,created_at,last_calculated_at,relative_return_pct,total_cost_basis,total_market_value,universe_coverage_pct,unrealized_pnl,unrealized_pnl_pct,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.650 [main] DEBUG org.hibernate.SQL - select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.id=?
2025-11-06 13:52:35.651 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.651 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.654 [main] INFO  c.s.controller.FactorController - Get factors for holding: dc6b977e-68f7-43b3-a6cc-bf2231960ed0
2025-11-06 13:52:35.654 [main] INFO  c.stockmonitor.service.FactorService - Getting factor scores for holding: dc6b977e-68f7-43b3-a6cc-bf2231960ed0
2025-11-06 13:52:35.654 [main] DEBUG org.hibernate.SQL - select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.id=?
2025-11-06 13:52:35.655 [main] WARN  c.s.c.GlobalExceptionHandler - Resource not found: Holding not found: dc6b977e-68f7-43b3-a6cc-bf2231960ed0

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/holdings/dc6b977e-68f7-43b3-a6cc-bf2231960ed0/factors
       Parameters = {}
          Headers = []
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.FactorController
           Method = com.stockmonitor.controller.FactorController#getHoldingFactors(UUID)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = java.lang.IllegalArgumentException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"timestamp":"2025-11-06T13:52:35.655875179","status":404,"error":"Not Found","message":"Holding not found: dc6b977e-68f7-43b3-a6cc-bf2231960ed0","path":"/api/holdings/dc6b977e-68f7-43b3-a6cc-bf2231960ed0/factors","validationErrors":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:35.660 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:35.661 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Portfolio */insert into portfolio (active_constraint_set_id,active_universe_id,benchmark_return_pct,cash_balance,created_at,last_calculated_at,relative_return_pct,total_cost_basis,total_market_value,universe_coverage_pct,unrealized_pnl,unrealized_pnl_pct,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.662 [main] DEBUG org.hibernate.SQL - select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.id=?
2025-11-06 13:52:35.662 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.663 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.665 [main] INFO  c.s.controller.FactorController - Get factors for portfolio: 9d79f00e-069e-448c-83b4-6c61036eec83
2025-11-06 13:52:35.665 [main] INFO  c.stockmonitor.service.FactorService - Getting factor scores for portfolio: 9d79f00e-069e-448c-83b4-6c61036eec83
2025-11-06 13:52:35.665 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
[ERROR] Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.072 s <<< FAILURE! -- in com.stockmonitor.contract.FactorContractTest
[ERROR] com.stockmonitor.contract.FactorContractTest.testGetHoldingFactors -- Time elapsed: 0.010 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:637)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.stockmonitor.contract.FactorContractTest.testGetHoldingFactors(FactorContractTest.java:129)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[INFO] Running com.stockmonitor.contract.DataSourceContractTest
2025-11-06 13:52:35.674 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.contract.DataSourceContractTest]: DataSourceContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:35.684 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.685 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.686 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.687 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.690 [main] INFO  c.s.controller.DataSourceController - Get all data sources request
2025-11-06 13:52:35.690 [main] INFO  c.s.service.DataSourceHealthService - Getting health status for all data sources
2025-11-06 13:52:35.691 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:35.699 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:35.700 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.700 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.700 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.700 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.705 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.706 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.707 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.708 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.710 [main] INFO  c.s.controller.DataSourceController - Get all data sources request
2025-11-06 13:52:35.710 [main] INFO  c.s.service.DataSourceHealthService - Getting health status for all data sources
2025-11-06 13:52:35.711 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:35.713 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:35.714 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.715 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.715 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.715 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.719 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.720 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.720 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.721 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.723 [main] INFO  c.s.controller.DataSourceController - Get all data sources request
2025-11-06 13:52:35.723 [main] INFO  c.s.service.DataSourceHealthService - Getting health status for all data sources
2025-11-06 13:52:35.724 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:35.726 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:35.727 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.727 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.728 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.728 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.733 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.733 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.734 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.734 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.737 [main] INFO  c.s.controller.DataSourceController - Get health for data source: market-data
2025-11-06 13:52:35.737 [main] INFO  c.s.service.DataSourceHealthService - Getting health for data source: market-data
2025-11-06 13:52:35.738 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0 where ds1_0.name=?
2025-11-06 13:52:35.743 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:35.744 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.744 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.744 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.744 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.748 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.748 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.749 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.750 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.DataSource */insert into data_source (consecutive_failures,created_at,description,error_message,health_status,is_active,is_critical,last_attempted_update,last_successful_update,last_update_duration_ms,name,provider,record_count,refresh_frequency_hours,source_type,staleness_threshold_hours,updated_at,uptime_pct_30d,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.752 [main] INFO  c.s.controller.DataSourceController - Get all data sources request
2025-11-06 13:52:35.752 [main] INFO  c.s.service.DataSourceHealthService - Getting health status for all data sources
2025-11-06 13:52:35.752 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:35.755 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:35.757 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.757 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.758 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
2025-11-06 13:52:35.758 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.DataSource */delete from data_source where id=?
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.087 s -- in com.stockmonitor.contract.DataSourceContractTest
[INFO] Running com.stockmonitor.contract.ReportContractTest
2025-11-06 13:52:35.763 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.contract.ReportContractTest]: ReportContractTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:35.769 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.771 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:35.845 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.912 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:35.926 [http-nio-auto-1-exec-2] INFO  c.s.controller.ReportController - GET /api/runs/0f1bb02b-caa2-480a-b60f-bfe5ce919e09/report - Fetching report
2025-11-06 13:52:35.926 [http-nio-auto-1-exec-2] INFO  c.s.service.ReportGenerationService - Generating report for run 0f1bb02b-caa2-480a-b60f-bfe5ce919e09
2025-11-06 13:52:35.927 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:35.929 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
2025-11-06 13:52:35.931 [http-nio-auto-1-exec-2] INFO  c.s.service.ReportGenerationService - Generated report for run 0f1bb02b-caa2-480a-b60f-bfe5ce919e09 with 0 recommendations
2025-11-06 13:52:35.958 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:35.959 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:35.964 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.965 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.966 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:35.971 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:35.975 [http-nio-auto-1-exec-3] INFO  c.s.controller.ReportController - GET /api/runs/fb86e3d6-e893-4251-a787-7e515a334c3d/report - Fetching report
2025-11-06 13:52:35.975 [http-nio-auto-1-exec-3] INFO  c.s.service.ReportGenerationService - Generating report for run fb86e3d6-e893-4251-a787-7e515a334c3d
2025-11-06 13:52:35.976 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:35.976 [http-nio-auto-1-exec-3] ERROR c.s.controller.ReportController - Run not completed: Run is not completed: RUNNING
2025-11-06 13:52:35.981 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:35.981 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:35.982 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:35.987 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:35.989 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:35.994 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:35.998 [http-nio-auto-1-exec-4] INFO  c.s.controller.ReportController - GET /api/runs/2f1ae757-cca5-4ac7-a1f1-3027ada2292a/report - Fetching report
2025-11-06 13:52:35.998 [http-nio-auto-1-exec-4] INFO  c.s.service.ReportGenerationService - Generating report for run 2f1ae757-cca5-4ac7-a1f1-3027ada2292a
2025-11-06 13:52:35.998 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:35.999 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
2025-11-06 13:52:36.000 [http-nio-auto-1-exec-4] INFO  c.s.service.ReportGenerationService - Generated report for run 2f1ae757-cca5-4ac7-a1f1-3027ada2292a with 0 recommendations
2025-11-06 13:52:36.003 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:36.004 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:36.010 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:36.011 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:36.015 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:36.018 [http-nio-auto-1-exec-5] INFO  c.s.controller.ReportController - GET /api/runs/2d087a19-3c23-40be-acd2-7c6ed1af4e68/report - Fetching report
2025-11-06 13:52:36.018 [http-nio-auto-1-exec-5] INFO  c.s.service.ReportGenerationService - Generating report for run 2d087a19-3c23-40be-acd2-7c6ed1af4e68
2025-11-06 13:52:36.019 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:36.020 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
2025-11-06 13:52:36.020 [http-nio-auto-1-exec-5] INFO  c.s.service.ReportGenerationService - Generated report for run 2d087a19-3c23-40be-acd2-7c6ed1af4e68 with 0 recommendations
2025-11-06 13:52:36.034 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:36.035 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:36.039 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:36.040 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:36.043 [http-nio-auto-1-exec-6] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:36.046 [http-nio-auto-1-exec-6] INFO  c.s.controller.ReportController - GET /api/runs/7dab66f4-4cf9-4c05-ad77-f7b3d51a5c5c/report - Fetching report
2025-11-06 13:52:36.046 [http-nio-auto-1-exec-6] INFO  c.s.service.ReportGenerationService - Generating report for run 7dab66f4-4cf9-4c05-ad77-f7b3d51a5c5c
2025-11-06 13:52:36.046 [http-nio-auto-1-exec-6] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:36.047 [http-nio-auto-1-exec-6] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
2025-11-06 13:52:36.047 [http-nio-auto-1-exec-6] INFO  c.s.service.ReportGenerationService - Generated report for run 7dab66f4-4cf9-4c05-ad77-f7b3d51a5c5c with 0 recommendations
2025-11-06 13:52:36.050 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:36.051 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:36.054 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:36.055 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:36.060 [http-nio-auto-1-exec-7] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:36.062 [http-nio-auto-1-exec-7] INFO  c.s.controller.ReportController - GET /api/runs/68d35d83-8594-43c1-a516-53f77b8b99d9/report - Fetching report
2025-11-06 13:52:36.063 [http-nio-auto-1-exec-7] INFO  c.s.service.ReportGenerationService - Generating report for run 68d35d83-8594-43c1-a516-53f77b8b99d9
2025-11-06 13:52:36.063 [http-nio-auto-1-exec-7] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:36.064 [http-nio-auto-1-exec-7] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
2025-11-06 13:52:36.064 [http-nio-auto-1-exec-7] INFO  c.s.service.ReportGenerationService - Generated report for run 68d35d83-8594-43c1-a516-53f77b8b99d9 with 0 recommendations
2025-11-06 13:52:36.067 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:36.067 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:36.072 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:36.073 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:36.076 [http-nio-auto-1-exec-8] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:36.079 [http-nio-auto-1-exec-8] INFO  c.s.controller.ReportController - GET /api/runs/9696c68c-178c-4b87-92bd-c4ef9b8eea6f/report - Fetching report
2025-11-06 13:52:36.079 [http-nio-auto-1-exec-8] INFO  c.s.service.ReportGenerationService - Generating report for run 9696c68c-178c-4b87-92bd-c4ef9b8eea6f
2025-11-06 13:52:36.080 [http-nio-auto-1-exec-8] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:36.080 [http-nio-auto-1-exec-8] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
2025-11-06 13:52:36.081 [http-nio-auto-1-exec-8] INFO  c.s.service.ReportGenerationService - Generated report for run 9696c68c-178c-4b87-92bd-c4ef9b8eea6f with 0 recommendations
2025-11-06 13:52:36.084 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:36.084 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:36.089 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:36.090 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:36.102 [http-nio-auto-1-exec-9] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:36.105 [http-nio-auto-1-exec-9] INFO  c.s.controller.ReportController - GET /api/runs/59077ab0-f662-459b-9908-c64ac36a0368/report/pdf - Downloading PDF
2025-11-06 13:52:36.105 [http-nio-auto-1-exec-9] INFO  c.s.service.ReportGenerationService - Generating PDF for run 59077ab0-f662-459b-9908-c64ac36a0368
2025-11-06 13:52:36.105 [http-nio-auto-1-exec-9] INFO  c.s.service.ReportGenerationService - Generating report for run 59077ab0-f662-459b-9908-c64ac36a0368
2025-11-06 13:52:36.106 [http-nio-auto-1-exec-9] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:36.106 [http-nio-auto-1-exec-9] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
2025-11-06 13:52:36.107 [http-nio-auto-1-exec-9] INFO  c.s.service.ReportGenerationService - Generated report for run 59077ab0-f662-459b-9908-c64ac36a0368 with 0 recommendations
2025-11-06 13:52:38.358 [http-nio-auto-1-exec-9] INFO  c.s.service.ReportGenerationService - Generated PDF for run 59077ab0-f662-459b-9908-c64ac36a0368 (6825 bytes)
2025-11-06 13:52:38.376 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:38.377 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:38.383 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:38.385 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:38.389 [http-nio-auto-1-exec-10] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:38.392 [http-nio-auto-1-exec-10] INFO  c.s.controller.ReportController - GET /api/runs/561d9743-d11f-430f-aef2-8bcaa85ed9b2/report - Fetching report
2025-11-06 13:52:38.392 [http-nio-auto-1-exec-10] INFO  c.s.service.ReportGenerationService - Generating report for run 561d9743-d11f-430f-aef2-8bcaa85ed9b2
2025-11-06 13:52:38.393 [http-nio-auto-1-exec-10] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:38.393 [http-nio-auto-1-exec-10] ERROR c.s.controller.ReportController - Run not found: 561d9743-d11f-430f-aef2-8bcaa85ed9b2
2025-11-06 13:52:38.396 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:38.397 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:38.402 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:38.403 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:38.407 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:38.410 [http-nio-auto-1-exec-1] INFO  c.s.controller.ReportController - GET /api/runs/c2f3a1f7-829d-4440-9818-2f3194e25d60/report - Fetching report
2025-11-06 13:52:38.410 [http-nio-auto-1-exec-1] INFO  c.s.service.ReportGenerationService - Generating report for run c2f3a1f7-829d-4440-9818-2f3194e25d60
2025-11-06 13:52:38.411 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:38.412 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
2025-11-06 13:52:38.412 [http-nio-auto-1-exec-1] INFO  c.s.service.ReportGenerationService - Generated report for run c2f3a1f7-829d-4440-9818-2f3194e25d60 with 0 recommendations
2025-11-06 13:52:38.417 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:38.418 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
2025-11-06 13:52:38.422 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:38.423 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:38.427 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:38.430 [http-nio-auto-1-exec-2] INFO  c.s.controller.ReportController - GET /api/runs/c77acad7-72d4-4752-aef8-1566e5deae20/report - Fetching report
2025-11-06 13:52:38.430 [http-nio-auto-1-exec-2] INFO  c.s.service.ReportGenerationService - Generating report for run c77acad7-72d4-4752-aef8-1566e5deae20
2025-11-06 13:52:38.430 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:38.431 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
2025-11-06 13:52:38.431 [http-nio-auto-1-exec-2] INFO  c.s.service.ReportGenerationService - Generated report for run c77acad7-72d4-4752-aef8-1566e5deae20 with 0 recommendations
2025-11-06 13:52:38.436 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0
2025-11-06 13:52:38.436 [main] DEBUG org.hibernate.SQL - /* delete for com.stockmonitor.model.RecommendationRun */delete from recommendation_run where id=?
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.677 s -- in com.stockmonitor.contract.ReportContractTest
[INFO] Running com.stockmonitor.engine.FactorCalculationServiceTest
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s -- in com.stockmonitor.engine.FactorCalculationServiceTest
[INFO] Running com.stockmonitor.engine.BacktestEngineTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s -- in com.stockmonitor.engine.BacktestEngineTest
[INFO] Running com.stockmonitor.service.PortfolioCalculationServiceTest
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.075 s -- in com.stockmonitor.service.PortfolioCalculationServiceTest
[INFO] Running com.stockmonitor.service.ConstraintPreviewServiceTest
2025-11-06 13:52:39.701 [main] INFO  c.s.service.ConstraintPreviewService - Previewing constraint impact for portfolio b808fd96-2d7b-45e5-8f41-fd8da4c7ffc1
2025-11-06 13:52:39.711 [main] INFO  c.s.service.ConstraintPreviewService - Found 30 recommendations from last run (2025-10-30T13:52:39.649488420)
2025-11-06 13:52:39.734 [main] INFO  c.s.service.ConstraintPreviewService - Previewing constraint impact for portfolio 94a68e5c-11fa-4816-aa1d-5d754c02d66c
2025-11-06 13:52:39.735 [main] INFO  c.s.service.ConstraintPreviewService - Found 30 recommendations from last run (2025-10-30T13:52:39.731812454)
2025-11-06 13:52:39.748 [main] INFO  c.s.service.ConstraintPreviewService - Previewing constraint impact for portfolio 8c00f088-fc2f-4c4b-8acb-f600bc140d62
2025-11-06 13:52:39.750 [main] INFO  c.s.service.ConstraintPreviewService - Found 30 recommendations from last run (2025-10-30T13:52:39.747013975)
2025-11-06 13:52:39.763 [main] INFO  c.s.service.ConstraintPreviewService - Previewing constraint impact for portfolio 8b59758c-698a-4411-974e-1073a9f1076e
2025-11-06 13:52:39.764 [main] INFO  c.s.service.ConstraintPreviewService - Found 30 recommendations from last run (2025-10-30T13:52:39.762101045)
2025-11-06 13:52:39.778 [main] INFO  c.s.service.ConstraintPreviewService - Previewing constraint impact for portfolio 1223c66a-f395-4fe1-adc1-e8dab58526f3
2025-11-06 13:52:39.787 [main] INFO  c.s.service.ConstraintPreviewService - Previewing constraint impact for portfolio b9c501ff-bdfb-4fdd-b5b1-52998cb306a3
2025-11-06 13:52:39.788 [main] INFO  c.s.service.ConstraintPreviewService - Found 30 recommendations from last run (2025-10-30T13:52:39.786109569)
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.265 s -- in com.stockmonitor.service.ConstraintPreviewServiceTest
[INFO] Running com.stockmonitor.service.HoldingsCsvParserTest
2025-11-06 13:52:39.806 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 0 holdings with 0 validation errors
2025-11-06 13:52:39.811 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 0 holdings with 1 validation errors
2025-11-06 13:52:39.815 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 0 holdings with 1 validation errors
2025-11-06 13:52:39.819 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 2 holdings with 0 validation errors
2025-11-06 13:52:39.823 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 3 holdings with 0 validation errors
2025-11-06 13:52:39.826 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 0 holdings with 1 validation errors
2025-11-06 13:52:39.828 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 3 holdings with 0 validation errors
2025-11-06 13:52:39.838 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 0 holdings with 1 validation errors
2025-11-06 13:52:39.841 [main] INFO  c.s.service.HoldingsCsvParser - Parsed 1 holdings with 0 validation errors
[INFO] Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.041 s -- in com.stockmonitor.service.HoldingsCsvParserTest
[INFO] Running com.stockmonitor.service.ReportGenerationServiceTest
2025-11-06 13:52:40.038 [main] INFO  c.s.service.ReportGenerationService - Generating report for run 2537c019-7cd6-414e-85a3-077a74399f65
2025-11-06 13:52:40.080 [main] INFO  c.s.service.ReportGenerationService - Generating report for run 94e7d201-d436-4383-91ee-7655dedbe789
2025-11-06 13:52:40.080 [main] INFO  c.s.service.ReportGenerationService - Generated report for run 94e7d201-d436-4383-91ee-7655dedbe789 with 0 recommendations
2025-11-06 13:52:40.106 [main] INFO  c.s.service.ReportGenerationService - Generating PDF for run 6bedea0d-157e-4109-b011-ea35488163cd
2025-11-06 13:52:40.106 [main] INFO  c.s.service.ReportGenerationService - Generating report for run 6bedea0d-157e-4109-b011-ea35488163cd
2025-11-06 13:52:40.107 [main] INFO  c.s.service.ReportGenerationService - Generated report for run 6bedea0d-157e-4109-b011-ea35488163cd with 15 recommendations
2025-11-06 13:52:40.139 [main] INFO  c.s.service.ReportGenerationService - Generated PDF for run 6bedea0d-157e-4109-b011-ea35488163cd (1176 bytes)
2025-11-06 13:52:40.146 [main] INFO  c.s.service.ReportGenerationService - Generating report for run 335cd3f4-5228-4e08-b1a4-ac4d1d62696b
2025-11-06 13:52:40.147 [main] INFO  c.s.service.ReportGenerationService - Generated report for run 335cd3f4-5228-4e08-b1a4-ac4d1d62696b with 15 recommendations
2025-11-06 13:52:40.152 [main] INFO  c.s.service.ReportGenerationService - Generating report for run a3ee1a9e-91c1-4f6e-bf4d-2b96e02417c9
2025-11-06 13:52:40.153 [main] INFO  c.s.service.ReportGenerationService - Generated report for run a3ee1a9e-91c1-4f6e-bf4d-2b96e02417c9 with 15 recommendations
2025-11-06 13:52:40.158 [main] INFO  c.s.service.ReportGenerationService - Generating report for run 36a3357a-0fe4-4e43-a0b9-547a66d2a5d7
2025-11-06 13:52:40.160 [main] INFO  c.s.service.ReportGenerationService - Generated report for run 36a3357a-0fe4-4e43-a0b9-547a66d2a5d7 with 15 recommendations
2025-11-06 13:52:40.173 [main] INFO  c.s.service.ReportGenerationService - Generating report for run 910e1384-70c1-4ae2-9791-b73595c6d71e
2025-11-06 13:52:40.173 [main] INFO  c.s.service.ReportGenerationService - Generated report for run 910e1384-70c1-4ae2-9791-b73595c6d71e with 15 recommendations
2025-11-06 13:52:40.178 [main] INFO  c.s.service.ReportGenerationService - Generating PDF for run dcd894f1-db3c-46ed-af22-e0037d91f2ed
2025-11-06 13:52:40.178 [main] INFO  c.s.service.ReportGenerationService - Generating report for run dcd894f1-db3c-46ed-af22-e0037d91f2ed
2025-11-06 13:52:40.179 [main] INFO  c.s.service.ReportGenerationService - Generated report for run dcd894f1-db3c-46ed-af22-e0037d91f2ed with 15 recommendations
2025-11-06 13:52:40.195 [main] INFO  c.s.service.ReportGenerationService - Generated PDF for run dcd894f1-db3c-46ed-af22-e0037d91f2ed (1176 bytes)
2025-11-06 13:52:40.201 [main] INFO  c.s.service.ReportGenerationService - Generating report for run ecc07ec7-8ece-4867-8d31-0df1d80a6b38
2025-11-06 13:52:40.202 [main] INFO  c.s.service.ReportGenerationService - Generated report for run ecc07ec7-8ece-4867-8d31-0df1d80a6b38 with 15 recommendations
2025-11-06 13:52:40.210 [main] INFO  c.s.service.ReportGenerationService - Generating report for run a2387a9a-b051-431b-9069-e9f198b0777c
2025-11-06 13:52:40.211 [main] INFO  c.s.service.ReportGenerationService - Generated report for run a2387a9a-b051-431b-9069-e9f198b0777c with 15 recommendations
2025-11-06 13:52:40.216 [main] INFO  c.s.service.ReportGenerationService - Generating report for run fe09d4bf-34e6-48e5-86dd-f9ccae84cc86
2025-11-06 13:52:40.220 [main] INFO  c.s.service.ReportGenerationService - Generating report for run 8ae1257e-921d-438b-9c2b-eaa596556e2d
2025-11-06 13:52:40.220 [main] INFO  c.s.service.ReportGenerationService - Generated report for run 8ae1257e-921d-438b-9c2b-eaa596556e2d with 15 recommendations
2025-11-06 13:52:40.223 [main] INFO  c.s.service.ReportGenerationService - Generating report for run 6dad61b4-9493-474f-bfba-24267a7bb44e
2025-11-06 13:52:40.224 [main] INFO  c.s.service.ReportGenerationService - Generated report for run 6dad61b4-9493-474f-bfba-24267a7bb44e with 15 recommendations
[INFO] Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.379 s -- in com.stockmonitor.service.ReportGenerationServiceTest
[INFO] Running com.stockmonitor.service.PerformanceAttributionServiceTest
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s -- in com.stockmonitor.service.PerformanceAttributionServiceTest
[INFO] Running com.stockmonitor.service.NotificationServiceTest
2025-11-06 13:52:40.883 [main] INFO  c.s.service.NotificationService - Created T-3_PRECOMPUTE notification for user 0a6a4509-3e3a-4220-80f2-528df596face: Month-End Recommendations: T-3 Pre-Compute Started
2025-11-06 13:52:40.891 [main] INFO  c.s.service.NotificationService - Created T_FINALIZED notification for user ab752697-c8a8-4b32-b59b-d64132b40b53: Test
2025-11-06 13:52:40.912 [main] INFO  c.s.service.NotificationService - Created T-1_STAGED notification for user 8be53d6a-783c-43da-8b1c-ef62396d30b0: Month-End Recommendations: T-1 Staging Complete
2025-11-06 13:52:40.916 [main] INFO  c.s.service.NotificationService - Created DATA_STALE notification for user 54d9953b-8585-4885-887c-86268c44f239: Data Freshness Warning
2025-11-06 13:52:40.926 [main] INFO  c.s.service.NotificationService - Created T_FINALIZED notification for user d91b5332-4cdd-470f-8fa8-9cd9ba6f4d2d: Month-End Recommendations Ready!
2025-11-06 13:52:40.940 [main] INFO  c.s.service.NotificationService - Created T_FINALIZED notification for user a3bf94b5-7ee9-4398-9e4c-df1521cd895d: Month-End Recommendations Ready
2025-11-06 13:52:40.943 [main] INFO  c.s.service.NotificationService - Marked 2 notifications as read for user efdca911-876e-45fd-81ac-1520a60dcf00
[INFO] Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.703 s -- in com.stockmonitor.service.NotificationServiceTest
[INFO] Running com.stockmonitor.service.ConstraintValidationServiceTest
[INFO] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.022 s -- in com.stockmonitor.service.ConstraintValidationServiceTest
[INFO] Running com.stockmonitor.service.ExclusionReasonServiceTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s -- in com.stockmonitor.service.ExclusionReasonServiceTest
[INFO] Running com.stockmonitor.repository.UserRepositoryTest
2025-11-06 13:52:40.986 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:41.121 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:41.144 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.150 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id from app_user u1_0 where u1_0.email=? fetch first ? rows only
2025-11-06 13:52:41.154 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id from app_user u1_0 where u1_0.email=? fetch first ? rows only
2025-11-06 13:52:41.169 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.177 [main] ERROR org.hibernate.orm.jdbc.batch - HHH100501: Exception executing batch [org.h2.jdbc.JdbcBatchUpdateException: Unique index or primary key violation: "public.CONSTRAINT_INDEX_4 ON public.app_user(email NULLS LAST) VALUES ( /* 41 */ 'test@example.com' )"; SQL statement:
/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at, [23505-224]], SQL: /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.177 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-11-06 13:52:41.178 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "public.CONSTRAINT_INDEX_4 ON public.app_user(email NULLS LAST) VALUES ( /* 41 */ 'test@example.com' )"; SQL statement:
/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at, [23505-224]
[ERROR] Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.224 s <<< FAILURE! -- in com.stockmonitor.repository.UserRepositoryTest
[ERROR] com.stockmonitor.repository.UserRepositoryTest.testSaveAndFindByEmail -- Time elapsed: 0.036 s <<< ERROR!
org.springframework.dao.DataIntegrityViolationException: 
could not execute batch [Unique index or primary key violation: "public.CONSTRAINT_INDEX_4 ON public.app_user(email NULLS LAST) VALUES ( /* 41 */ 'test@example.com' )"; SQL statement:
/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at, [23505-224]] [/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; constraint ["public.CONSTRAINT_INDEX_4 ON public.app_user(email NULLS LAST) VALUES ( /* 41 */ 'test@example.com' )"; SQL statement:
/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at, [23505-224]]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy186.save(Unknown Source)
	at com.stockmonitor.repository.UserRepositoryTest.testSaveAndFindByEmail(UserRepositoryTest.java:31)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute batch [Unique index or primary key violation: "public.CONSTRAINT_INDEX_4 ON public.app_user(email NULLS LAST) VALUES ( /* 41 */ 'test@example.com' )"; SQL statement:
/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at, [23505-224]] [/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:287)
	at org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)
	at org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)
	at org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)
	... 84 more
Caused by: org.h2.jdbc.JdbcBatchUpdateException: Unique index or primary key violation: "public.CONSTRAINT_INDEX_4 ON public.app_user(email NULLS LAST) VALUES ( /* 41 */ 'test@example.com' )"; SQL statement:
/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at, [23505-224]
	at org.h2.jdbc.JdbcPreparedStatement.executeBatch(JdbcPreparedStatement.java:1282)
	at com.zaxxer.hikari.pool.ProxyStatement.executeBatch(ProxyStatement.java:127)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeBatch(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:273)
	... 102 more

[INFO] Running com.stockmonitor.security.JwtServiceTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.130 s -- in com.stockmonitor.security.JwtServiceTest
[INFO] Running com.stockmonitor.integration.BacktestExecutionTest
2025-11-06 13:52:41.340 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.integration.BacktestExecutionTest]: BacktestExecutionTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.102 s -- in com.stockmonitor.integration.BacktestExecutionTest
[INFO] Running com.stockmonitor.integration.ConstraintModificationTest
2025-11-06 13:52:41.444 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.integration.ConstraintModificationTest]: ConstraintModificationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:41.467 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.473 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Portfolio */insert into portfolio (active_constraint_set_id,active_universe_id,benchmark_return_pct,cash_balance,created_at,last_calculated_at,relative_return_pct,total_cost_basis,total_market_value,universe_coverage_pct,unrealized_pnl,unrealized_pnl_pct,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.486 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.489 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:41.494 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.Portfolio */update portfolio set active_constraint_set_id=?,active_universe_id=?,benchmark_return_pct=?,cash_balance=?,last_calculated_at=?,relative_return_pct=?,total_cost_basis=?,total_market_value=?,universe_coverage_pct=?,unrealized_pnl=?,unrealized_pnl_pct=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:41.501 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.507 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.511 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.516 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.521 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.526 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.530 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.534 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.536 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.540 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.542 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.545 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.548 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.550 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.552 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.555 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.558 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.561 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.570 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.573 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.575 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.577 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.578 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.580 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.583 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.585 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.589 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.592 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.595 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.599 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.602 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Recommendation */insert into recommendation (change_indicator,confidence_score,constraint_notes,created_at,current_price,current_weight_pct,driver1_name,driver1_score,driver2_name,driver2_score,driver3_name,driver3_score,edge_over_cost_bps,expected_alpha_bps,expected_cost_bps,explanation,liquidity_tier,market_cap_tier,rank,risk_contribution_pct,run_id,sector,symbol,target_weight_pct,weight_change_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.605 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.606 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.613 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.615 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.616 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.618 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.620 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.622 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.624 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.627 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.631 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.634 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.636 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.638 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.639 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.641 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.642 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.644 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.646 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.650 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Holding */insert into holding (acquisition_date,cost_basis,cost_basis_per_share,created_at,currency,current_market_value,current_price,fx_rate_to_base,in_universe,market_cap_tier,portfolio_id,price_updated_at,quantity,sector,symbol,unrealized_pnl,unrealized_pnl_pct,updated_at,weight_pct,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.651 [main] INFO  c.s.service.ConstraintPreviewService - Previewing constraint impact for portfolio d2d199eb-4dbc-427f-8ede-6095916b5417
2025-11-06 13:52:41.652 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:41.655 [main] DEBUG org.hibernate.SQL - select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.id=?
2025-11-06 13:52:41.663 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.user_id=? and rr1_0.status=? order by rr1_0.completed_at desc fetch first ? rows only
2025-11-06 13:52:41.668 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=?
2025-11-06 13:52:41.675 [main] INFO  c.s.service.ConstraintPreviewService - Found 30 recommendations from last run (2025-11-05T13:52:41.497871)
2025-11-06 13:52:41.679 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:41.687 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=?
2025-11-06 13:52:41.712 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.714 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Portfolio */insert into portfolio (active_constraint_set_id,active_universe_id,benchmark_return_pct,cash_balance,created_at,last_calculated_at,relative_return_pct,total_cost_basis,total_market_value,universe_coverage_pct,unrealized_pnl,unrealized_pnl_pct,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.718 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.720 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:41.724 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.Portfolio */update portfolio set active_constraint_set_id=?,active_universe_id=?,benchmark_return_pct=?,cash_balance=?,last_calculated_at=?,relative_return_pct=?,total_cost_basis=?,total_market_value=?,universe_coverage_pct=?,unrealized_pnl=?,unrealized_pnl_pct=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:41.727 [main] INFO  c.s.service.ConstraintService - Updating constraints for portfolio: 52b8dd3d-e0f8-4158-89b5-24e2864b093b
2025-11-06 13:52:41.728 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:41.730 [main] DEBUG org.hibernate.SQL - select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.id=?
2025-11-06 13:52:41.732 [main] INFO  c.s.service.ConstraintService - Updated constraints for portfolio 52b8dd3d-e0f8-4158-89b5-24e2864b093b to version 2
2025-11-06 13:52:41.733 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.734 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.Portfolio */update portfolio set active_constraint_set_id=?,active_universe_id=?,benchmark_return_pct=?,cash_balance=?,last_calculated_at=?,relative_return_pct=?,total_cost_basis=?,total_market_value=?,universe_coverage_pct=?,unrealized_pnl=?,unrealized_pnl_pct=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:41.737 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:41.740 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:41.741 [main] DEBUG org.hibernate.SQL - select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.id=?
2025-11-06 13:52:41.751 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.753 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Portfolio */insert into portfolio (active_constraint_set_id,active_universe_id,benchmark_return_pct,cash_balance,created_at,last_calculated_at,relative_return_pct,total_cost_basis,total_market_value,universe_coverage_pct,unrealized_pnl,unrealized_pnl_pct,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.755 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.757 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:41.759 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.Portfolio */update portfolio set active_constraint_set_id=?,active_universe_id=?,benchmark_return_pct=?,cash_balance=?,last_calculated_at=?,relative_return_pct=?,total_cost_basis=?,total_market_value=?,universe_coverage_pct=?,unrealized_pnl=?,unrealized_pnl_pct=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:41.760 [main] INFO  c.s.service.ConstraintService - Updating constraints for portfolio: fb145da1-980c-42af-a352-24513ae8404d
2025-11-06 13:52:41.761 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:41.762 [main] DEBUG org.hibernate.SQL - select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.id=?
2025-11-06 13:52:41.764 [main] INFO  c.s.service.ConstraintService - Updated constraints for portfolio fb145da1-980c-42af-a352-24513ae8404d to version 2
2025-11-06 13:52:41.765 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.766 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.Portfolio */update portfolio set active_constraint_set_id=?,active_universe_id=?,benchmark_return_pct=?,cash_balance=?,last_calculated_at=?,relative_return_pct=?,total_cost_basis=?,total_market_value=?,universe_coverage_pct=?,unrealized_pnl=?,unrealized_pnl_pct=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:41.768 [main] INFO  c.s.service.ConstraintService - Resetting constraints to defaults for portfolio: fb145da1-980c-42af-a352-24513ae8404d
2025-11-06 13:52:41.768 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:41.770 [main] DEBUG org.hibernate.SQL - select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.id=?
2025-11-06 13:52:41.773 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.775 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.ConstraintSet */update constraint_set set cost_margin_required_bps=?,earnings_blackout_hours=?,is_active=?,liquidity_floor_adv_usd=?,max_name_weight_large_cap_pct=?,max_name_weight_mid_cap_pct=?,max_name_weight_small_cap_pct=?,max_sector_exposure_pct=?,name=?,participation_cap_tier1_pct=?,participation_cap_tier2_pct=?,participation_cap_tier3_pct=?,participation_cap_tier4_pct=?,participation_cap_tier5_pct=?,spread_threshold_bps=?,turnover_cap_pct=?,updated_at=?,user_id=?,version=?,weight_deadband_bps=? where id=?
2025-11-06 13:52:41.776 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.Portfolio */update portfolio set active_constraint_set_id=?,active_universe_id=?,benchmark_return_pct=?,cash_balance=?,last_calculated_at=?,relative_return_pct=?,total_cost_basis=?,total_market_value=?,universe_coverage_pct=?,unrealized_pnl=?,unrealized_pnl_pct=?,updated_at=?,user_id=? where id=?
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.339 s -- in com.stockmonitor.integration.ConstraintModificationTest
[INFO] Running com.stockmonitor.integration.OffCycleIsolationTest
2025-11-06 13:52:41.786 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.integration.OffCycleIsolationTest]: OffCycleIsolationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:41.837 [http-nio-auto-1-exec-3] INFO  c.s.controller.AuthController - Registration request received for email: offcycle-test-9433a1c2-fae4-4b78-9cea-a2dc49565107@example.com
2025-11-06 13:52:41.838 [http-nio-auto-1-exec-3] INFO  c.stockmonitor.service.UserService - Registering new user with email: offcycle-test-9433a1c2-fae4-4b78-9cea-a2dc49565107@example.com
2025-11-06 13:52:41.840 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id from app_user u1_0 where u1_0.email=? fetch first ? rows only
2025-11-06 13:52:41.930 [http-nio-auto-1-exec-3] INFO  c.stockmonitor.service.UserService - User registered successfully with ID: af47743b-0c2e-4659-85da-9f47ef8943bb
2025-11-06 13:52:41.932 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:41.956 [http-nio-auto-1-exec-4] INFO  c.s.controller.AuthController - Login request received for email: offcycle-test-9433a1c2-fae4-4b78-9cea-a2dc49565107@example.com
2025-11-06 13:52:41.956 [http-nio-auto-1-exec-4] INFO  c.stockmonitor.service.UserService - Login attempt for email: offcycle-test-9433a1c2-fae4-4b78-9cea-a2dc49565107@example.com
2025-11-06 13:52:41.960 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.036 [http-nio-auto-1-exec-4] INFO  c.stockmonitor.service.UserService - User logged in successfully: offcycle-test-9433a1c2-fae4-4b78-9cea-a2dc49565107@example.com
2025-11-06 13:52:42.042 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.User */update app_user set base_currency=?,disclaimer_accepted_at=?,email=?,email_verified=?,enabled=?,first_name=?,last_login_at=?,last_name=?,notification_preferences=?,password_hash=?,role=?,selected_universe_id=?,timezone=?,updated_at=? where id=?
2025-11-06 13:52:42.052 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.054 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:42.061 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.073 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.075 [main] INFO  c.s.controller.PortfolioController - Create portfolio request for user: af47743b-0c2e-4659-85da-9f47ef8943bb
2025-11-06 13:52:42.075 [main] INFO  c.s.service.PortfolioService - Getting or creating portfolio for user: af47743b-0c2e-4659-85da-9f47ef8943bb
2025-11-06 13:52:42.077 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:42.078 [main] INFO  c.s.service.PortfolioService - Creating new portfolio for user: af47743b-0c2e-4659-85da-9f47ef8943bb
2025-11-06 13:52:42.079 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Portfolio */insert into portfolio (active_constraint_set_id,active_universe_id,benchmark_return_pct,cash_balance,created_at,last_calculated_at,relative_return_pct,total_cost_basis,total_market_value,universe_coverage_pct,unrealized_pnl,unrealized_pnl_pct,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:42.094 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.106 [main] INFO  c.s.controller.UniverseController - Get all universes request
2025-11-06 13:52:42.107 [main] INFO  c.s.service.UniverseService - Fetching all active universes
2025-11-06 13:52:42.108 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.is_active
2025-11-06 13:52:42.111 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:42.114 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:42.115 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:42.135 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.141 [main] INFO  c.s.c.RecommendationController - Trigger recommendation run request: portfolio=b3e547d7-ad00-4fd9-8f8a-4f8d4cb792a0, universe=114b3816-e916-494a-97c7-9d77ab662123, runType=null
2025-11-06 13:52:42.142 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:42.143 [main] INFO  c.s.service.RecommendationService - Triggering OFF_CYCLE recommendation run for portfolio b3e547d7-ad00-4fd9-8f8a-4f8d4cb792a0 with universe 114b3816-e916-494a-97c7-9d77ab662123
2025-11-06 13:52:42.144 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:42.146 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.user_id=? and cs1_0.is_active
2025-11-06 13:52:42.147 [main] INFO  c.s.service.DataSourceHealthService - Checking data source health with 24 hour freshness threshold
2025-11-06 13:52:42.155 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:42.157 [main] WARN  c.s.service.DataSourceHealthService - No active market data sources found
2025-11-06 13:52:42.158 [main] INFO  c.s.service.RecommendationEngine - Generating recommendations for run 900e90ba-3458-472e-8057-593c9eda6087 using universe S&P 500 and constraints Test Constraints
2025-11-06 13:52:42.162 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:42.162 [main] INFO  c.s.service.RecommendationEngine - Universe contains 0 active constituents
2025-11-06 13:52:42.165 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:42.167 [main] INFO  c.s.service.RecommendationEngine - Generated 0 recommendations for run 900e90ba-3458-472e-8057-593c9eda6087
2025-11-06 13:52:42.167 [main] INFO  c.s.service.RecommendationService - Recommendation run 900e90ba-3458-472e-8057-593c9eda6087 completed successfully with 0 recommendations
2025-11-06 13:52:42.169 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:42.171 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.RecommendationRun */update recommendation_run set completed_at=?,constraint_feasibility_check_passed=?,constraint_set_id=?,data_freshness_check_passed=?,decision=?,decision_reason=?,error_message=?,estimated_cost_bps=?,exclusion_count=?,execution_duration_ms=?,expected_alpha_bps=?,expected_turnover_pct=?,portfolio_id=?,previous_run_id=?,recommendation_count=?,run_type=?,scheduled_date=?,started_at=?,status=?,universe_id=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:42.211 [http-nio-auto-1-exec-5] INFO  c.s.controller.AuthController - Registration request received for email: offcycle-test-cc167bbb-9116-4ee5-8795-9de0cbf2a693@example.com
2025-11-06 13:52:42.212 [http-nio-auto-1-exec-5] INFO  c.stockmonitor.service.UserService - Registering new user with email: offcycle-test-cc167bbb-9116-4ee5-8795-9de0cbf2a693@example.com
2025-11-06 13:52:42.214 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id from app_user u1_0 where u1_0.email=? fetch first ? rows only
2025-11-06 13:52:42.360 [http-nio-auto-1-exec-5] INFO  c.stockmonitor.service.UserService - User registered successfully with ID: 82e8521e-6a0f-427e-8d44-8038339990b6
2025-11-06 13:52:42.363 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:42.377 [http-nio-auto-1-exec-6] INFO  c.s.controller.AuthController - Login request received for email: offcycle-test-cc167bbb-9116-4ee5-8795-9de0cbf2a693@example.com
2025-11-06 13:52:42.377 [http-nio-auto-1-exec-6] INFO  c.stockmonitor.service.UserService - Login attempt for email: offcycle-test-cc167bbb-9116-4ee5-8795-9de0cbf2a693@example.com
2025-11-06 13:52:42.379 [http-nio-auto-1-exec-6] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.457 [http-nio-auto-1-exec-6] INFO  c.stockmonitor.service.UserService - User logged in successfully: offcycle-test-cc167bbb-9116-4ee5-8795-9de0cbf2a693@example.com
2025-11-06 13:52:42.459 [http-nio-auto-1-exec-6] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.User */update app_user set base_currency=?,disclaimer_accepted_at=?,email=?,email_verified=?,enabled=?,first_name=?,last_login_at=?,last_name=?,notification_preferences=?,password_hash=?,role=?,selected_universe_id=?,timezone=?,updated_at=? where id=?
2025-11-06 13:52:42.466 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.468 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:42.474 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.479 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.479 [main] INFO  c.s.controller.PortfolioController - Create portfolio request for user: 82e8521e-6a0f-427e-8d44-8038339990b6
2025-11-06 13:52:42.479 [main] INFO  c.s.service.PortfolioService - Getting or creating portfolio for user: 82e8521e-6a0f-427e-8d44-8038339990b6
2025-11-06 13:52:42.481 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:42.482 [main] INFO  c.s.service.PortfolioService - Creating new portfolio for user: 82e8521e-6a0f-427e-8d44-8038339990b6
2025-11-06 13:52:42.484 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Portfolio */insert into portfolio (active_constraint_set_id,active_universe_id,benchmark_return_pct,cash_balance,created_at,last_calculated_at,relative_return_pct,total_cost_basis,total_market_value,universe_coverage_pct,unrealized_pnl,unrealized_pnl_pct,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:42.491 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.497 [main] INFO  c.s.controller.UniverseController - Get all universes request
2025-11-06 13:52:42.497 [main] INFO  c.s.service.UniverseService - Fetching all active universes
2025-11-06 13:52:42.498 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.is_active
2025-11-06 13:52:42.501 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:42.503 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:42.505 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:42.514 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.523 [main] INFO  c.s.c.RecommendationController - Trigger recommendation run request: portfolio=0c21b370-1eb3-4184-b0d6-3d413d094f3c, universe=114b3816-e916-494a-97c7-9d77ab662123, runType=SCHEDULED
2025-11-06 13:52:42.523 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:42.524 [main] INFO  c.s.service.RecommendationService - Triggering SCHEDULED recommendation run for portfolio 0c21b370-1eb3-4184-b0d6-3d413d094f3c with universe 114b3816-e916-494a-97c7-9d77ab662123
2025-11-06 13:52:42.525 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:42.530 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.user_id=? and cs1_0.is_active
2025-11-06 13:52:42.531 [main] INFO  c.s.service.DataSourceHealthService - Checking data source health with 24 hour freshness threshold
2025-11-06 13:52:42.532 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:42.532 [main] WARN  c.s.service.DataSourceHealthService - No active market data sources found
2025-11-06 13:52:42.533 [main] INFO  c.s.service.RecommendationEngine - Generating recommendations for run 43184d64-35b4-4cdc-89c8-8b3ec796545e using universe S&P 500 and constraints Test Constraints
2025-11-06 13:52:42.535 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:42.535 [main] INFO  c.s.service.RecommendationEngine - Universe contains 0 active constituents
2025-11-06 13:52:42.539 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:42.539 [main] INFO  c.s.service.RecommendationEngine - Generated 0 recommendations for run 43184d64-35b4-4cdc-89c8-8b3ec796545e
2025-11-06 13:52:42.540 [main] INFO  c.s.service.RecommendationService - Recommendation run 43184d64-35b4-4cdc-89c8-8b3ec796545e completed successfully with 0 recommendations
2025-11-06 13:52:42.540 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:42.542 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.RecommendationRun */update recommendation_run set completed_at=?,constraint_feasibility_check_passed=?,constraint_set_id=?,data_freshness_check_passed=?,decision=?,decision_reason=?,error_message=?,estimated_cost_bps=?,exclusion_count=?,execution_duration_ms=?,expected_alpha_bps=?,expected_turnover_pct=?,portfolio_id=?,previous_run_id=?,recommendation_count=?,run_type=?,scheduled_date=?,started_at=?,status=?,universe_id=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:42.548 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:42.551 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.555 [main] INFO  c.s.c.RecommendationController - Trigger recommendation run request: portfolio=0c21b370-1eb3-4184-b0d6-3d413d094f3c, universe=114b3816-e916-494a-97c7-9d77ab662123, runType=OFF_CYCLE
2025-11-06 13:52:42.556 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.id=?
2025-11-06 13:52:42.557 [main] INFO  c.s.service.RecommendationService - Triggering OFF_CYCLE recommendation run for portfolio 0c21b370-1eb3-4184-b0d6-3d413d094f3c with universe 114b3816-e916-494a-97c7-9d77ab662123
2025-11-06 13:52:42.557 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.id=?
2025-11-06 13:52:42.559 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select cs1_0.id,cs1_0.cost_margin_required_bps,cs1_0.created_at,cs1_0.earnings_blackout_hours,cs1_0.is_active,cs1_0.liquidity_floor_adv_usd,cs1_0.max_name_weight_large_cap_pct,cs1_0.max_name_weight_mid_cap_pct,cs1_0.max_name_weight_small_cap_pct,cs1_0.max_sector_exposure_pct,cs1_0.name,cs1_0.participation_cap_tier1_pct,cs1_0.participation_cap_tier2_pct,cs1_0.participation_cap_tier3_pct,cs1_0.participation_cap_tier4_pct,cs1_0.participation_cap_tier5_pct,cs1_0.spread_threshold_bps,cs1_0.turnover_cap_pct,cs1_0.updated_at,cs1_0.user_id,cs1_0.version,cs1_0.weight_deadband_bps from constraint_set cs1_0 where cs1_0.user_id=? and cs1_0.is_active
2025-11-06 13:52:42.560 [main] INFO  c.s.service.DataSourceHealthService - Checking data source health with 24 hour freshness threshold
2025-11-06 13:52:42.561 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select ds1_0.id,ds1_0.consecutive_failures,ds1_0.created_at,ds1_0.description,ds1_0.error_message,ds1_0.health_status,ds1_0.is_active,ds1_0.is_critical,ds1_0.last_attempted_update,ds1_0.last_successful_update,ds1_0.last_update_duration_ms,ds1_0.name,ds1_0.provider,ds1_0.record_count,ds1_0.refresh_frequency_hours,ds1_0.source_type,ds1_0.staleness_threshold_hours,ds1_0.updated_at,ds1_0.uptime_pct_30d from data_source ds1_0
2025-11-06 13:52:42.561 [main] WARN  c.s.service.DataSourceHealthService - No active market data sources found
2025-11-06 13:52:42.562 [main] INFO  c.s.service.RecommendationEngine - Generating recommendations for run 4e86e686-66db-462c-b5d1-8b10074be490 using universe S&P 500 and constraints Test Constraints
2025-11-06 13:52:42.565 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select uc1_0.id,uc1_0.added_date,uc1_0.avg_daily_value,uc1_0.avg_daily_volume,uc1_0.company_name,uc1_0.created_at,uc1_0.industry,uc1_0.is_active,uc1_0.liquidity_tier,uc1_0.market_cap_tier,uc1_0.removed_date,uc1_0.sector,uc1_0.symbol,uc1_0.universe_id,uc1_0.updated_at from universe_constituent uc1_0 where uc1_0.universe_id=? and uc1_0.is_active
2025-11-06 13:52:42.565 [main] INFO  c.s.service.RecommendationEngine - Universe contains 0 active constituents
2025-11-06 13:52:42.567 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select h1_0.id,h1_0.acquisition_date,h1_0.cost_basis,h1_0.cost_basis_per_share,h1_0.created_at,h1_0.currency,h1_0.current_market_value,h1_0.current_price,h1_0.fx_rate_to_base,h1_0.in_universe,h1_0.market_cap_tier,h1_0.portfolio_id,h1_0.price_updated_at,h1_0.quantity,h1_0.sector,h1_0.symbol,h1_0.unrealized_pnl,h1_0.unrealized_pnl_pct,h1_0.updated_at,h1_0.weight_pct from holding h1_0 where h1_0.portfolio_id=?
2025-11-06 13:52:42.568 [main] INFO  c.s.service.RecommendationEngine - Generated 0 recommendations for run 4e86e686-66db-462c-b5d1-8b10074be490
2025-11-06 13:52:42.568 [main] INFO  c.s.service.RecommendationService - Recommendation run 4e86e686-66db-462c-b5d1-8b10074be490 completed successfully with 0 recommendations
2025-11-06 13:52:42.570 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.RecommendationRun */insert into recommendation_run (completed_at,constraint_feasibility_check_passed,constraint_set_id,created_at,data_freshness_check_passed,decision,decision_reason,error_message,estimated_cost_bps,exclusion_count,execution_duration_ms,expected_alpha_bps,expected_turnover_pct,portfolio_id,previous_run_id,recommendation_count,run_type,scheduled_date,started_at,status,universe_id,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:42.571 [main] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.RecommendationRun */update recommendation_run set completed_at=?,constraint_feasibility_check_passed=?,constraint_set_id=?,data_freshness_check_passed=?,decision=?,decision_reason=?,error_message=?,estimated_cost_bps=?,exclusion_count=?,execution_duration_ms=?,expected_alpha_bps=?,expected_turnover_pct=?,portfolio_id=?,previous_run_id=?,recommendation_count=?,run_type=?,scheduled_date=?,started_at=?,status=?,universe_id=?,updated_at=?,user_id=? where id=?
2025-11-06 13:52:42.577 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:42.583 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.588 [main] INFO  c.s.c.RecommendationController - Get current recommendations for portfolio: 0c21b370-1eb3-4184-b0d6-3d413d094f3c
2025-11-06 13:52:42.588 [main] INFO  c.s.service.RecommendationService - Fetching current recommendations for portfolio 0c21b370-1eb3-4184-b0d6-3d413d094f3c
2025-11-06 13:52:42.592 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.portfolio_id=? and rr1_0.run_type=? order by rr1_0.created_at desc
2025-11-06 13:52:42.594 [main] INFO  c.s.service.RecommendationService - Returning recommendations from SCHEDULED run 43184d64-35b4-4cdc-89c8-8b3ec796545e
2025-11-06 13:52:42.594 [main] INFO  c.s.service.RecommendationService - Fetching recommendations for run 43184d64-35b4-4cdc-89c8-8b3ec796545e
2025-11-06 13:52:42.595 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
2025-11-06 13:52:42.609 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.614 [main] INFO  c.s.c.RecommendationController - Get runs request with run_type filter: SCHEDULED
2025-11-06 13:52:42.614 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.615 [main] INFO  c.s.service.RecommendationService - Fetching SCHEDULED runs for user 82e8521e-6a0f-427e-8d44-8038339990b6
2025-11-06 13:52:42.617 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.user_id=? and rr1_0.run_type=? order by rr1_0.created_at desc
2025-11-06 13:52:42.629 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.632 [main] INFO  c.s.c.RecommendationController - Get runs request with run_type filter: OFF_CYCLE
2025-11-06 13:52:42.634 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.634 [main] INFO  c.s.service.RecommendationService - Fetching OFF_CYCLE runs for user 82e8521e-6a0f-427e-8d44-8038339990b6
2025-11-06 13:52:42.637 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.user_id=? and rr1_0.run_type=? order by rr1_0.created_at desc
2025-11-06 13:52:42.643 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:42.647 [main] INFO  c.s.c.RecommendationController - Get recommendations request for run ID: 4e86e686-66db-462c-b5d1-8b10074be490
2025-11-06 13:52:42.647 [main] INFO  c.s.service.RecommendationService - Fetching recommendations for run 4e86e686-66db-462c-b5d1-8b10074be490
2025-11-06 13:52:42.647 [main] DEBUG org.hibernate.SQL - select rr1_0.id,rr1_0.completed_at,rr1_0.constraint_feasibility_check_passed,rr1_0.constraint_set_id,rr1_0.created_at,rr1_0.data_freshness_check_passed,rr1_0.decision,rr1_0.decision_reason,rr1_0.error_message,rr1_0.estimated_cost_bps,rr1_0.exclusion_count,rr1_0.execution_duration_ms,rr1_0.expected_alpha_bps,rr1_0.expected_turnover_pct,rr1_0.portfolio_id,rr1_0.previous_run_id,rr1_0.recommendation_count,rr1_0.run_type,rr1_0.scheduled_date,rr1_0.started_at,rr1_0.status,rr1_0.universe_id,rr1_0.updated_at,rr1_0.user_id from recommendation_run rr1_0 where rr1_0.id=?
2025-11-06 13:52:42.649 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select r1_0.id,r1_0.change_indicator,r1_0.confidence_score,r1_0.constraint_notes,r1_0.created_at,r1_0.current_price,r1_0.current_weight_pct,r1_0.driver1_name,r1_0.driver1_score,r1_0.driver2_name,r1_0.driver2_score,r1_0.driver3_name,r1_0.driver3_score,r1_0.edge_over_cost_bps,r1_0.expected_alpha_bps,r1_0.expected_cost_bps,r1_0.explanation,r1_0.liquidity_tier,r1_0.market_cap_tier,r1_0.rank,r1_0.risk_contribution_pct,r1_0.run_id,r1_0.sector,r1_0.symbol,r1_0.target_weight_pct,r1_0.weight_change_pct from recommendation r1_0 where r1_0.run_id=? order by r1_0.rank
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.871 s -- in com.stockmonitor.integration.OffCycleIsolationTest
[INFO] Running com.stockmonitor.integration.MonthEndWorkflowTest
2025-11-06 13:52:42.661 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.integration.MonthEndWorkflowTest]: MonthEndWorkflowTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.0)

2025-11-06 13:52:42.788 [main] INFO  c.s.integration.MonthEndWorkflowTest - Starting MonthEndWorkflowTest using Java 21.0.8 with PID 2793 (started by root in /home/user/stock-monitor/backend)
2025-11-06 13:52:42.788 [main] INFO  c.s.integration.MonthEndWorkflowTest - The following 1 profile is active: "batch-test"
2025-11-06 13:52:44.234 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-11-06 13:52:44.245 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource-org.springframework.boot.autoconfigure.jdbc.DataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-11-06 13:52:44.252 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$PooledDataSourceConfiguration' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$PooledDataSourceConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-11-06 13:52:44.255 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'jdbcConnectionDetails' of type [org.springframework.boot.autoconfigure.jdbc.PropertiesJdbcConnectionDetails] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-11-06 13:52:44.266 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSource' of type [com.zaxxer.hikari.HikariDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-11-06 13:52:44.282 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'batchConfig' of type [com.stockmonitor.config.BatchConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-11-06 13:52:44.293 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-11-06 13:52:44.309 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.batch-org.springframework.boot.autoconfigure.batch.BatchProperties' of type [org.springframework.boot.autoconfigure.batch.BatchProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-11-06 13:52:44.319 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration$SpringBootBatchConfiguration' of type [org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration$SpringBootBatchConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [jobRegistryBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-11-06 13:52:45.029 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-06 13:52:45.509 [main] DEBUG org.hibernate.SQL - drop table if exists app_user cascade 
2025-11-06 13:52:45.512 [main] DEBUG org.hibernate.SQL - drop table if exists audit_log cascade 
2025-11-06 13:52:45.513 [main] DEBUG org.hibernate.SQL - drop table if exists backtest cascade 
2025-11-06 13:52:45.514 [main] DEBUG org.hibernate.SQL - drop table if exists constraint_set cascade 
2025-11-06 13:52:45.514 [main] DEBUG org.hibernate.SQL - drop table if exists data_source cascade 
2025-11-06 13:52:45.515 [main] DEBUG org.hibernate.SQL - drop table if exists exclusion cascade 
2025-11-06 13:52:45.516 [main] DEBUG org.hibernate.SQL - drop table if exists factor_model_version cascade 
2025-11-06 13:52:45.516 [main] DEBUG org.hibernate.SQL - drop table if exists factor_score cascade 
2025-11-06 13:52:45.517 [main] DEBUG org.hibernate.SQL - drop table if exists holding cascade 
2025-11-06 13:52:45.517 [main] DEBUG org.hibernate.SQL - drop table if exists notification cascade 
2025-11-06 13:52:45.518 [main] DEBUG org.hibernate.SQL - drop table if exists portfolio cascade 
2025-11-06 13:52:45.518 [main] DEBUG org.hibernate.SQL - drop table if exists recommendation cascade 
2025-11-06 13:52:45.518 [main] DEBUG org.hibernate.SQL - drop table if exists recommendation_run cascade 
2025-11-06 13:52:45.519 [main] DEBUG org.hibernate.SQL - drop table if exists report cascade 
2025-11-06 13:52:45.520 [main] DEBUG org.hibernate.SQL - drop table if exists service_api_keys cascade 
2025-11-06 13:52:45.520 [main] DEBUG org.hibernate.SQL - drop table if exists universe cascade 
2025-11-06 13:52:45.521 [main] DEBUG org.hibernate.SQL - drop table if exists universe_constituent cascade 
2025-11-06 13:52:45.522 [main] DEBUG org.hibernate.SQL - create table app_user (base_currency varchar(3) not null, email_verified boolean not null, enabled boolean not null, created_at timestamp(6) not null, disclaimer_accepted_at timestamp(6), last_login_at timestamp(6), updated_at timestamp(6) not null, id uuid not null, selected_universe_id uuid, email varchar(255) not null unique, first_name varchar(255), last_name varchar(255), password_hash varchar(255) not null, role varchar(255) not null check (role in ('OWNER','VIEWER','SERVICE')), timezone varchar(255) not null, notification_preferences TEXT, primary key (id))
2025-11-06 13:52:45.525 [main] DEBUG org.hibernate.SQL - create table audit_log (success boolean not null, created_at timestamp(6) not null, execution_duration_ms bigint, entity_id uuid not null, id uuid not null, user_id uuid, action varchar(20) not null, ip_address varchar(45), entity_type varchar(50) not null, request_id varchar(100), session_id varchar(100), action_detail varchar(200), user_agent varchar(500), error_message varchar(1000), after_state TEXT, before_state TEXT, changed_fields varchar(255) array, primary key (id))
2025-11-06 13:52:45.527 [main] DEBUG org.hibernate.SQL - create table backtest (alpha_pct numeric(10,6), avg_turnover_pct numeric(5,2), beat_equal_weight boolean, benchmark_return_pct numeric(10,6), cagr_pct numeric(10,6), end_date date not null, final_value numeric(19,4), hit_rate_pct numeric(5,2), initial_capital numeric(19,4) not null, max_drawdown_pct numeric(10,6), sharpe_ratio numeric(7,4), start_date date not null, total_cost_bps numeric(10,2), total_return_pct numeric(10,6), volatility_pct numeric(10,6), completed_at timestamp(6), created_at timestamp(6) not null, execution_duration_ms bigint, started_at timestamp(6), updated_at timestamp(6) not null, constraint_set_id uuid not null, id uuid not null, universe_id uuid not null, user_id uuid not null, status varchar(20) not null, name varchar(100) not null, verdict_text varchar(500), error_message varchar(1000), cost_assumptions TEXT not null, equity_curve_data TEXT not null, turnover_history TEXT not null, primary key (id))
2025-11-06 13:52:45.530 [main] DEBUG org.hibernate.SQL - create table constraint_set (cost_margin_required_bps integer not null, earnings_blackout_hours integer not null, is_active boolean not null, liquidity_floor_adv_usd numeric(19,4) not null, max_name_weight_large_cap_pct numeric(5,2) not null, max_name_weight_mid_cap_pct numeric(5,2) not null, max_name_weight_small_cap_pct numeric(5,2) not null, max_sector_exposure_pct numeric(5,2) not null, participation_cap_tier1_pct numeric(5,2) not null, participation_cap_tier2_pct numeric(5,2) not null, participation_cap_tier3_pct numeric(5,2) not null, participation_cap_tier4_pct numeric(5,2) not null, participation_cap_tier5_pct numeric(5,2) not null, spread_threshold_bps integer not null, turnover_cap_pct numeric(5,2) not null, version integer not null, weight_deadband_bps integer not null, created_at timestamp(6) not null, updated_at timestamp(6) not null, id uuid not null, user_id uuid not null, name varchar(100) not null, primary key (id))
2025-11-06 13:52:45.532 [main] DEBUG org.hibernate.SQL - create table data_source (consecutive_failures integer not null, is_active boolean not null, is_critical boolean not null, refresh_frequency_hours integer not null, staleness_threshold_hours integer not null, uptime_pct_30d numeric(5,2), created_at timestamp(6) not null, last_attempted_update timestamp(6), last_successful_update timestamp(6), last_update_duration_ms bigint, record_count bigint, updated_at timestamp(6) not null, id uuid not null, health_status varchar(20) not null, source_type varchar(20) not null, name varchar(100) not null unique, provider varchar(100) not null, description varchar(500), error_message varchar(1000), primary key (id))
2025-11-06 13:52:45.534 [main] DEBUG org.hibernate.SQL - create table exclusion (current_price numeric(19,4) not null, failed_constraint_threshold numeric(19,4), failed_constraint_value numeric(19,4), liquidity_tier integer not null, created_at timestamp(6) not null, id uuid not null, run_id uuid not null, market_cap_tier varchar(20) not null, symbol varchar(20) not null, exclusion_reason_code varchar(50) not null, sector varchar(50) not null, failed_constraint_name varchar(100), exclusion_reason_text varchar(500) not null, primary key (id))
2025-11-06 13:52:45.537 [main] DEBUG org.hibernate.SQL - create table factor_model_version (effective_date date not null, is_active boolean not null, winsorization_percentile numeric(5,2) not null, created_at timestamp(6) not null, id uuid not null, version_number varchar(20) not null unique, approved_by varchar(100), created_by varchar(100) not null, sector_neutralization_method varchar(100) not null, description varchar(1000), composite_weighting TEXT not null, momentum_definition TEXT not null, quality_definition TEXT not null, revisions_definition TEXT not null, value_definition TEXT not null, primary key (id))
2025-11-06 13:52:45.538 [main] DEBUG org.hibernate.SQL - create table factor_score (calculation_date date not null, data_quality_score integer not null, percentile_rank_sector numeric(5,2) not null, percentile_rank_universe numeric(5,2) not null, raw_score numeric(10,6) not null, sector_normalized_score numeric(10,6) not null, created_at timestamp(6) not null, id uuid not null, factor_type varchar(20) not null, symbol varchar(20) not null, sector varchar(50) not null, component_breakdown TEXT not null, primary key (id))
2025-11-06 13:52:45.539 [main] DEBUG org.hibernate.SQL - create table holding (acquisition_date date not null, cost_basis numeric(19,4) not null, cost_basis_per_share numeric(19,4) not null, currency varchar(3) not null, current_market_value numeric(19,4) not null, current_price numeric(19,4) not null, fx_rate_to_base numeric(19,8) not null, in_universe boolean not null, quantity numeric(19,6) not null, unrealized_pnl numeric(19,4) not null, unrealized_pnl_pct numeric(10,6) not null, weight_pct numeric(5,2) not null, created_at timestamp(6) not null, price_updated_at timestamp(6), updated_at timestamp(6) not null, id uuid not null, portfolio_id uuid not null, market_cap_tier varchar(20), symbol varchar(20) not null, sector varchar(50), primary key (id))
2025-11-06 13:52:45.540 [main] DEBUG org.hibernate.SQL - create table notification (is_read boolean not null, created_at timestamp(6) not null, read_at timestamp(6), sent_at timestamp(6) not null, id uuid not null, run_id uuid, user_id uuid not null, channel varchar(20) not null, delivery_status varchar(20) not null, priority varchar(20) not null, notification_type varchar(30) not null, action_label varchar(50), category varchar(50), subject varchar(200) not null, action_url varchar(500), delivery_error varchar(500), message varchar(2000) not null, title varchar(255), primary key (id))
2025-11-06 13:52:45.541 [main] DEBUG org.hibernate.SQL - create table portfolio (benchmark_return_pct numeric(10,6) not null, cash_balance numeric(19,4) not null, relative_return_pct numeric(10,6) not null, total_cost_basis numeric(19,4) not null, total_market_value numeric(19,4) not null, universe_coverage_pct numeric(5,2) not null, unrealized_pnl numeric(19,4) not null, unrealized_pnl_pct numeric(10,6) not null, created_at timestamp(6) not null, last_calculated_at timestamp(6) not null, updated_at timestamp(6) not null, active_constraint_set_id uuid, active_universe_id uuid, id uuid not null, user_id uuid not null unique, primary key (id))
2025-11-06 13:52:45.543 [main] DEBUG org.hibernate.SQL - create table recommendation (confidence_score integer not null, current_price numeric(19,4) not null, current_weight_pct numeric(5,2) not null, driver1_score numeric(7,4) not null, driver2_score numeric(7,4) not null, driver3_score numeric(7,4) not null, edge_over_cost_bps numeric(7,2) not null, expected_alpha_bps numeric(7,2) not null, expected_cost_bps numeric(7,2) not null, liquidity_tier integer not null, rank integer not null, risk_contribution_pct numeric(5,2), target_weight_pct numeric(5,2) not null, weight_change_pct numeric(5,2) not null, created_at timestamp(6) not null, id uuid not null, run_id uuid not null, change_indicator varchar(20) not null, market_cap_tier varchar(20) not null, symbol varchar(20) not null, driver1_name varchar(50) not null, driver2_name varchar(50) not null, driver3_name varchar(50) not null, sector varchar(50) not null, constraint_notes varchar(500), explanation varchar(1000) not null, primary key (id))
2025-11-06 13:52:45.544 [main] DEBUG org.hibernate.SQL - create table recommendation_run (constraint_feasibility_check_passed boolean not null, data_freshness_check_passed boolean not null, estimated_cost_bps numeric(7,2), exclusion_count integer not null, expected_alpha_bps numeric(7,2), expected_turnover_pct numeric(5,2), recommendation_count integer not null, scheduled_date date, completed_at timestamp(6), created_at timestamp(6) not null, execution_duration_ms bigint, started_at timestamp(6), updated_at timestamp(6) not null, constraint_set_id uuid not null, id uuid not null, portfolio_id uuid not null, previous_run_id uuid, universe_id uuid not null, user_id uuid not null, decision varchar(20) not null, run_type varchar(20) not null, status varchar(20) not null, decision_reason varchar(500), error_message varchar(1000), primary key (id))
2025-11-06 13:52:45.545 [main] DEBUG org.hibernate.SQL - create table report (download_count integer not null, exclusion_count integer not null, recommendation_count integer not null, created_at timestamp(6) not null, downloaded_at timestamp(6), file_size_bytes bigint, generation_timestamp timestamp(6) not null, updated_at timestamp(6) not null, format varchar(10) not null, id uuid not null, run_id uuid not null unique, user_id uuid not null, disclaimer_version varchar(20) not null, report_type varchar(20) not null, file_path varchar(500), summary_text varchar(2000) not null, disclaimer_text varchar(5000) not null, constraint_snapshot TEXT not null, cost_analysis TEXT, performance_metrics TEXT, primary key (id))
2025-11-06 13:52:45.547 [main] DEBUG org.hibernate.SQL - create table service_api_keys (is_active boolean not null, created_at timestamp(6) not null, expires_at timestamp(6), last_used_at timestamp(6), updated_at timestamp(6) not null, id uuid not null, key_hash varchar(512) not null unique, created_by varchar(255), description varchar(255), name varchar(255) not null, primary key (id))
2025-11-06 13:52:45.548 [main] DEBUG org.hibernate.SQL - create table universe (constituent_count integer not null, effective_date date not null, is_active boolean not null, max_market_cap numeric(19,4), min_market_cap numeric(19,4), version integer not null, created_at timestamp(6) not null, updated_at timestamp(6) not null, id uuid not null, benchmark_symbol varchar(20) not null, type varchar(20) not null, name varchar(100) not null unique, description varchar(500), liquidity_tier_threshold TEXT not null, primary key (id))
2025-11-06 13:52:45.550 [main] DEBUG org.hibernate.SQL - create table universe_constituent (added_date date not null, avg_daily_value numeric(19,4) not null, avg_daily_volume numeric(19,2) not null, is_active boolean not null, liquidity_tier integer not null, removed_date date, created_at timestamp(6) not null, updated_at timestamp(6) not null, id uuid not null, universe_id uuid not null, market_cap_tier varchar(20) not null, symbol varchar(20) not null, sector varchar(50) not null, industry varchar(100), company_name varchar(255) not null, primary key (id))
2025-11-06 13:52:45.551 [main] DEBUG org.hibernate.SQL - create index idx_service_api_keys_key_hash on service_api_keys (key_hash)
2025-11-06 13:52:45.551 [main] DEBUG org.hibernate.SQL - create index idx_service_api_keys_is_active on service_api_keys (is_active)
2025-11-06 13:52:46.922 [main] WARN  com.stockmonitor.config.CacheConfig - Redis unavailable - falling back to Caffeine local cache only: Unable to connect to Redis
2025-11-06 13:52:47.027 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-06 13:52:47.440 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2780b5f8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7c7cc8d4, org.springframework.security.web.context.SecurityContextHolderFilter@b13f92b, org.springframework.security.web.header.HeaderWriterFilter@61667255, org.springframework.security.web.authentication.logout.LogoutFilter@68145e66, com.stockmonitor.security.ServiceApiKeyAuthFilter@35fede0f, com.stockmonitor.security.JwtAuthenticationFilter@7b4aa9dd, com.stockmonitor.security.ServiceRoleAccessFilter@75a000d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7d85c829, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@66450b54, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a466e58, org.springframework.security.web.session.SessionManagementFilter@26e0a61a, org.springframework.security.web.access.ExceptionTranslationFilter@340a0860, org.springframework.security.web.access.intercept.AuthorizationFilter@26e1089c]
2025-11-06 13:52:48.184 [main] INFO  org.springframework.web.SimpLogging - Starting...
2025-11-06 13:52:48.184 [main] INFO  org.springframework.web.SimpLogging - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@12c4f6b9]]
2025-11-06 13:52:48.185 [main] INFO  org.springframework.web.SimpLogging - Started.
2025-11-06 13:52:48.215 [main] INFO  c.s.integration.MonthEndWorkflowTest - Started MonthEndWorkflowTest in 5.547 seconds (process running for 47.866)
[WARNING] Tests run: 9, Failures: 0, Errors: 0, Skipped: 9, Time elapsed: 5.567 s -- in com.stockmonitor.integration.MonthEndWorkflowTest
[INFO] Running com.stockmonitor.integration.NoTradeDecisionTest
2025-11-06 13:52:48.229 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.integration.NoTradeDecisionTest]: NoTradeDecisionTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s -- in com.stockmonitor.integration.NoTradeDecisionTest
[INFO] Running com.stockmonitor.integration.OnboardingFlowTest
2025-11-06 13:52:48.241 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.stockmonitor.integration.OnboardingFlowTest]: OnboardingFlowTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-06 13:52:48.255 [http-nio-auto-1-exec-7] INFO  c.s.controller.AuthController - Registration request received for email: test-793c83d8-0071-406b-bf7a-196adbcaa1ca@example.com
2025-11-06 13:52:48.256 [http-nio-auto-1-exec-7] INFO  c.stockmonitor.service.UserService - Registering new user with email: test-793c83d8-0071-406b-bf7a-196adbcaa1ca@example.com
2025-11-06 13:52:48.259 [http-nio-auto-1-exec-7] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id from app_user u1_0 where u1_0.email=? fetch first ? rows only
2025-11-06 13:52:48.335 [http-nio-auto-1-exec-7] INFO  c.stockmonitor.service.UserService - User registered successfully with ID: 2107345f-a370-4e41-a268-c4380f9bc8bf
2025-11-06 13:52:48.337 [http-nio-auto-1-exec-7] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:48.345 [main] INFO  c.s.controller.AuthController - Login request received for email: test-793c83d8-0071-406b-bf7a-196adbcaa1ca@example.com
2025-11-06 13:52:48.346 [main] INFO  c.stockmonitor.service.UserService - Login attempt for email: test-793c83d8-0071-406b-bf7a-196adbcaa1ca@example.com
2025-11-06 13:52:48.349 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:48.427 [main] WARN  c.s.c.GlobalExceptionHandler - Authentication failed: Invalid email or password
2025-11-06 13:52:48.440 [http-nio-auto-1-exec-8] INFO  c.s.controller.AuthController - Registration request received for email: test-11c0dac2-8da0-4961-a437-59c3ac059909@example.com
2025-11-06 13:52:48.441 [http-nio-auto-1-exec-8] INFO  c.stockmonitor.service.UserService - Registering new user with email: test-11c0dac2-8da0-4961-a437-59c3ac059909@example.com
2025-11-06 13:52:48.442 [http-nio-auto-1-exec-8] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id from app_user u1_0 where u1_0.email=? fetch first ? rows only
2025-11-06 13:52:48.517 [http-nio-auto-1-exec-8] INFO  c.stockmonitor.service.UserService - User registered successfully with ID: 1f1cb3f8-c049-4252-be5e-bf2b704e12a7
2025-11-06 13:52:48.518 [http-nio-auto-1-exec-8] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:48.524 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:48.526 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.ConstraintSet */insert into constraint_set (cost_margin_required_bps,created_at,earnings_blackout_hours,is_active,liquidity_floor_adv_usd,max_name_weight_large_cap_pct,max_name_weight_mid_cap_pct,max_name_weight_small_cap_pct,max_sector_exposure_pct,name,participation_cap_tier1_pct,participation_cap_tier2_pct,participation_cap_tier3_pct,participation_cap_tier4_pct,participation_cap_tier5_pct,spread_threshold_bps,turnover_cap_pct,updated_at,user_id,version,weight_deadband_bps,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:48.533 [http-nio-auto-1-exec-9] INFO  c.s.controller.AuthController - Login request received for email: test-11c0dac2-8da0-4961-a437-59c3ac059909@example.com
2025-11-06 13:52:48.534 [http-nio-auto-1-exec-9] INFO  c.stockmonitor.service.UserService - Login attempt for email: test-11c0dac2-8da0-4961-a437-59c3ac059909@example.com
2025-11-06 13:52:48.535 [http-nio-auto-1-exec-9] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:48.611 [http-nio-auto-1-exec-9] INFO  c.stockmonitor.service.UserService - User logged in successfully: test-11c0dac2-8da0-4961-a437-59c3ac059909@example.com
2025-11-06 13:52:48.613 [http-nio-auto-1-exec-9] DEBUG org.hibernate.SQL - /* update for com.stockmonitor.model.User */update app_user set base_currency=?,disclaimer_accepted_at=?,email=?,email_verified=?,enabled=?,first_name=?,last_login_at=?,last_name=?,notification_preferences=?,password_hash=?,role=?,selected_universe_id=?,timezone=?,updated_at=? where id=?
2025-11-06 13:52:48.620 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:48.624 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:48.624 [main] INFO  c.s.controller.PortfolioController - Create portfolio request for user: 1f1cb3f8-c049-4252-be5e-bf2b704e12a7
2025-11-06 13:52:48.625 [main] INFO  c.s.service.PortfolioService - Getting or creating portfolio for user: 1f1cb3f8-c049-4252-be5e-bf2b704e12a7
2025-11-06 13:52:48.625 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select p1_0.id,p1_0.active_constraint_set_id,p1_0.active_universe_id,p1_0.benchmark_return_pct,p1_0.cash_balance,p1_0.created_at,p1_0.last_calculated_at,p1_0.relative_return_pct,p1_0.total_cost_basis,p1_0.total_market_value,p1_0.universe_coverage_pct,p1_0.unrealized_pnl,p1_0.unrealized_pnl_pct,p1_0.updated_at,p1_0.user_id from portfolio p1_0 where p1_0.user_id=?
2025-11-06 13:52:48.626 [main] INFO  c.s.service.PortfolioService - Creating new portfolio for user: 1f1cb3f8-c049-4252-be5e-bf2b704e12a7
2025-11-06 13:52:48.627 [main] DEBUG org.hibernate.SQL - /* insert for com.stockmonitor.model.Portfolio */insert into portfolio (active_constraint_set_id,active_universe_id,benchmark_return_pct,cash_balance,created_at,last_calculated_at,relative_return_pct,total_cost_basis,total_market_value,universe_coverage_pct,unrealized_pnl,unrealized_pnl_pct,updated_at,user_id,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
2025-11-06 13:52:48.633 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.base_currency,u1_0.created_at,u1_0.disclaimer_accepted_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_login_at,u1_0.last_name,u1_0.notification_preferences,u1_0.password_hash,u1_0.role,u1_0.selected_universe_id,u1_0.timezone,u1_0.updated_at from app_user u1_0 where u1_0.email=?
2025-11-06 13:52:48.637 [main] INFO  c.s.controller.UniverseController - Get all universes request
2025-11-06 13:52:48.637 [main] INFO  c.s.service.UniverseService - Fetching all active universes
2025-11-06 13:52:48.638 [main] DEBUG org.hibernate.SQL - /* <criteria> */ select u1_0.id,u1_0.benchmark_symbol,u1_0.constituent_count,u1_0.created_at,u1_0.description,u1_0.effective_date,u1_0.is_active,u1_0.liquidity_tier_threshold,u1_0.max_market_cap,u1_0.min_market_cap,u1_0.name,u1_0.type,u1_0.updated_at,u1_0.version from universe u1_0 where u1_0.is_active

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/portfolios
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0LTExYzBkYWMyLThkYTAtNDk2MS1hNDM3LTU5YzNhYzA1OTkwOUBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE2OCwiZXhwIjoxNzYyNDQwNzY4fQ.0YPx8sfcvxxWvObhShP3opvzMNN0EgjMx-H_mIGLP8o", Content-Length:"265"]
             Body = {"id":null,"userId":"1f1cb3f8-c049-4252-be5e-bf2b704e12a7","cash":null,"marketValue":null,"totalValue":null,"unrealizedPnl":null,"benchmarkReturnPct":null,"relativeReturnPct":null,"universeCoveragePct":null,"lastCalculatedAt":null,"createdAt":null,"updatedAt":null}
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.PortfolioController
           Method = com.stockmonitor.controller.PortfolioController#createPortfolio()

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 201
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":"614e567d-3837-4a6f-acf5-7ddc8a38e586","userId":"1f1cb3f8-c049-4252-be5e-bf2b704e12a7","cash":0,"marketValue":0,"totalValue":0,"unrealizedPnl":0,"benchmarkReturnPct":0,"relativeReturnPct":0,"universeCoveragePct":0,"lastCalculatedAt":"2025-11-06T13:52:48.626556458","createdAt":null,"updatedAt":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/universes
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0LTExYzBkYWMyLThkYTAtNDk2MS1hNDM3LTU5YzNhYzA1OTkwOUBleGFtcGxlLmNvbSIsImlhdCI6MTc2MjQzNzE2OCwiZXhwIjoxNzYyNDQwNzY4fQ.0YPx8sfcvxxWvObhShP3opvzMNN0EgjMx-H_mIGLP8o"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.stockmonitor.controller.UniverseController
           Method = com.stockmonitor.controller.UniverseController#getAllUniverses()

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = []
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-11-06 13:52:48.676 [http-nio-auto-1-exec-1] WARN  c.s.c.GlobalExceptionHandler - Validation error: {email=Email must be valid}
[ERROR] Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.440 s <<< FAILURE! -- in com.stockmonitor.integration.OnboardingFlowTest
[ERROR] com.stockmonitor.integration.OnboardingFlowTest.testCompleteOnboardingFlow -- Time elapsed: 0.217 s <<< FAILURE!
java.lang.AssertionError: 

Expecting actual:
  0
to be greater than:
  0

	at com.stockmonitor.integration.OnboardingFlowTest.testCompleteOnboardingFlow(OnboardingFlowTest.java:130)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   BacktestContractTest.testBacktestValidatesDateRange:134 No value at JSON path "$.message"
[ERROR]   BacktestContractTest.testGetBacktestResults:79 Status expected:<200> but was:<404>
[ERROR]   BacktestContractTest.testRunBacktest:58 Status expected:<200> but was:<400>
[ERROR]   ConstraintContractTest.testResetConstraints:197 JSON path "$.maxNameWeightLargeCapPct" expected:<10.0> but was:<5.0>
[ERROR]   FactorContractTest.testGetHoldingFactors:129 Status expected:<200> but was:<404>
[ERROR]   PortfolioContractTest.testGetPortfolioPerformance_ContributorsIncludeDetails:251 No value at JSON path "$.topContributors[0].symbol"
[ERROR]   PortfolioContractTest.testGetPortfolioPerformance_Success:234 No value at JSON path "$.periodStart"
[ERROR]   PortfolioContractTest.testUploadHoldings_InvalidCsv:124 Status expected:<400> but was:<200>
[ERROR]   RecommendationContractTest.testGetRecommendations_Ranked:167 Status expected:<200> but was:<404>
[ERROR]   RecommendationContractTest.testGetRecommendations_RunNotCompleted:212 Status expected:<200> but was:<404>
[ERROR]   RecommendationContractTest.testGetRecommendations_Success:146 Status expected:<200> but was:<404>
[ERROR]   RecommendationContractTest.testGetRecommendations_WithDriverExplanations:183 Status expected:<200> but was:<404>
[ERROR]   RecommendationContractTest.testGetRunStatus_Success:225 Status expected:<200> but was:<404>
[ERROR]   RecommendationContractTest.testTriggerRecommendationRun_DataNotFresh:100 No value at JSON path "$.dataFreshnessSnapshot"
[ERROR]   UniverseContractTest.testGetUniverseById_Success:184 Status expected:<200> but was:<404>
[ERROR]   UniverseContractTest.testSelectUniverseForPortfolio_Success:226 Status expected:<200> but was:<404>
[ERROR]   OnboardingFlowTest.testCompleteOnboardingFlow:130 
Expecting actual:
  0
to be greater than:
  0

[ERROR] Errors: 
[ERROR]   UserRepositoryTest.testSaveAndFindByEmail:31 ? DataIntegrityViolation could not execute batch [Unique index or primary key violation: "public.CONSTRAINT_INDEX_4 ON public.app_user(email NULLS LAST) VALUES ( /* 41 */ 'test@example.com' )"; SQL statement:
/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at, [23505-224]] [/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; constraint ["public.CONSTRAINT_INDEX_4 ON public.app_user(email NULLS LAST) VALUES ( /* 41 */ 'test@example.com' )"; SQL statement:
/* insert for com.stockmonitor.model.User */insert into app_user (base_currency,created_at,disclaimer_accepted_at,email,email_verified,enabled,first_name,last_login_at,last_name,notification_preferences,password_hash,role,selected_universe_id,timezone,updated_at, [23505-224]]
[INFO] 
[ERROR] Tests run: 183, Failures: 17, Errors: 1, Skipped: 9
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  01:05 min
[INFO] Finished at: 2025-11-06T13:52:49Z
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.2.5:test (default-test) on project stockmonitor-backend: There are test failures.
[ERROR] 
[ERROR] Please refer to /home/user/stock-monitor/backend/target/surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
